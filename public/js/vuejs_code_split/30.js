(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{oPQU:function(t,a,s){"use strict";s.r(a);var e=s("o0O0"),r=function(){return s.e(28).then(s.bind(null,"LR9I"))},i={props:["card","admin","properties","code","use","student","assign","import"],components:{Buttons:r},mounted:function(){this.description=e.default.styleText(this.trans.get(this.card.description))},data:function(){return{description:""}},methods:{share:function(){var t=this;this.$buefy.dialog.confirm({title:this.trans.get("cards.share"),message:this.trans.get("cards.share_message"),confirmText:this.trans.get("cards.share_btn"),cancelText:this.trans.get("general.cancel"),type:"is-warning",hasIcon:!0,icon:"times-circle",iconPack:"fa",ariaRole:"alertdialog",ariaModal:!0,onConfirm:function(){axios.post("/card/share",{id:t.card.id}).then((function(a){t.$toast(t.trans.get("success_error.add_success"),{type:"success"})}))}})},importCard:function(){var t=this;axios.post("/classroom/"+this.code+"/card/import",{id:this.card.id}).then((function(a){t.$toast(t.trans.get("success_error.add_success"),{type:"success"})}))},assignCard:function(){var t=this;axios.post("/classroom/"+this.code+"/card/assign",{type:"student",id:this.assign,card:this.card.id}).then((function(a){t.$toast(t.trans.get("success_error.add_success"),{type:"success"})}))},markCard:function(t,a){var s=this,e=0;if(null!=this.$parent.$parent.$parent.student.level&&(e=this.$parent.$parent.$parent.student.level.number),1==a&&this.card.min_lvl>e)return!1;this.admin?this.$buefy.dialog.confirm({title:this.trans.get("cards.use_title"),message:this.trans.get("cards.use_text_bypass"),confirmText:this.trans.get("cards.use_confirm"),cancelText:this.trans.get("general.cancel"),type:"is-warning",hasIcon:!0,icon:"times-circle",iconPack:"fa",ariaRole:"alertdialog",ariaModal:!0,onConfirm:function(){axios.post("/classroom/card/usedelete/bypass/"+s.card.id,{type:a,student:s.student.id}).then((function(t){s.$destroy(),s.$el.parentNode.removeChild(s.$el),t.data.gold?s.$toast(t.data.message,{type:"default",timeout:0,closeButton:r}):s.$toast(t.data.message,{type:t.data.type})}))}}):this.$buefy.dialog.confirm({title:this.trans.get("cards.use_title"),message:this.trans.get("cards.use_text"),confirmText:this.trans.get("cards.use_confirm"),cancelText:this.trans.get("general.cancel"),type:"is-warning",hasIcon:!0,icon:"times-circle",iconPack:"fa",ariaRole:"alertdialog",ariaModal:!0,onConfirm:function(){axios.post("/classroom/"+s.code+"/card/mark/"+s.card.id,{type:a,student:s.student.id}).then((function(e){s.$toast(e.data.message,{type:e.data.type}),t.pivot.marked=a,s.$forceUpdate()}))}})},getMessage:function(t){return this.checkLevel()?this.trans.get("students.card_level"):1==t?this.trans.get("students.card_marked"):this.trans.get("students.card_use")},checkLevel:function(){var t=0;return null!=this.$parent.$parent.$parent.student.level&&(t=this.$parent.$parent.$parent.student.level.number),this.card.min_lvl>t},confirmDelete:function(){var t=this;this.$buefy.dialog.confirm({title:this.trans.get("general.delete"),message:this.trans.get("general.confirm_delete"),confirmText:this.trans.get("general.delete"),cancelText:this.trans.get("general.cancel"),type:"is-danger",hasIcon:!0,icon:"times-circle",iconPack:"fa",ariaRole:"alertdialog",ariaModal:!0,onConfirm:function(){axios.delete("/classroom/card/"+t.card.id).then((function(a){1===a.data&&t.$el.parentNode.removeChild(t.$el)}))}})}}},n=s("KHd+"),c=Object(n.a)(i,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"m-2"},[this.use?s("div",{staticStyle:{"text-align":"center"}},[s("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"button is-success",class:{disabled:t.checkLevel(),"has-background-dark":1==t.card.pivot.marked},attrs:{type:"submit",content:t.getMessage(t.card.pivot.marked)},on:{click:function(a){return t.markCard(t.card,1)}}},[s("i",{staticClass:"fas fa-check"}),t._v(" "+t._s(t.trans.get("cards.use"))+"\n    ")]),t._v(" "),t.card.xp>=0&&t.card.gold>=0&&t.card.hp>=0?s("button",{staticClass:"button is-danger",class:{"has-background-dark":2==t.card.pivot.marked},attrs:{type:"submit"},on:{click:function(a){return t.markCard(t.card,2)}}},[s("i",{staticClass:"fas fa-trash-alt"}),t._v(" "+t._s(t.trans.get("cards.delete"))+"\n    ")]):t._e()]):t._e(),t._v(" "),s("div",{staticClass:"cardContainer cardFunction",style:"background-color:"+t.card.background+";",attrs:{"data-id":"1","group-id":""}},[t.card.min_lvl?s("div",{staticClass:"lvl-top-left"},[s("img",{staticClass:"levelCard",attrs:{src:"/img/cardgen/lvl.png"}}),t._v(" "),s("span",{staticClass:"numberLvl"},[t._v(t._s(t.card.min_lvl))])]):t._e(),t._v(" "),t.card.fullscreen?t._e():s("img",{staticClass:"typeCard",attrs:{src:"/img/cardgen/type_"+t.card.type+".png"}}),t._v(" "),s("div",[s("h3",{staticClass:"title-cards textShadow"},[s("svg",{attrs:{viewBox:"0 0 500 500"}},[s("path",{attrs:{id:"curve",d:"m 3.2938789,150.87387 c 5.55773,-3.11588 91.0078161,-49.44517 248.1526411,-48.83221 154.64384,0.61296 237.31506,46.12499 243.28962,49.54732"}}),t._v(" "),s("text",{attrs:{width:"250px"}},[s("textPath",{attrs:{"xlink:href":"#curve",startOffset:"50%","text-anchor":"middle"}},[t._v("\n              "+t._s(t.trans.get(t.card.title))+"\n            ")])])])])]),t._v(" "),t.card.fullscreen?t._e():s("img",{staticClass:"ribbon",attrs:{src:"/img/cardgen/ribbon-"+t.card.type+".png"}}),t._v(" "),t.card.special||t.card.fullscreen?t._e():s("img",{staticClass:"background",attrs:{src:"/img/cardgen/only_back_"+t.card.type_bg+".png"}}),t._v(" "),t.card.special&&!t.card.fullscreen?s("img",{staticClass:"background",attrs:{src:"/img/cardgen/only_back_"+t.card.type_bg+"_gold.png"}}):t._e(),t._v(" "),s("div",{staticClass:"content-cards text_shadow",domProps:{innerHTML:t._s(t.description)}}),t._v(" "),s("div",{staticClass:"hiding-parent"},[s("img",{staticClass:"back",style:"margin-left: "+t.card.margin_left+"px;margin-top:"+t.card.margin_top+"px;width:"+t.card.width+"px;border-radius:"+t.card.radius+"px",attrs:{src:t.card.src}})]),t._v(" "),0!=t.card.xp?s("div",{staticClass:"xp_modify modifiers"},[s("img",{attrs:{src:"/img/cardgen/xp_modify.png"}}),t._v(" "),s("span",[t._v(t._s(t.card.xp))])]):t._e(),t._v(" "),0!=t.card.hp?s("div",{staticClass:"hp_modify modifiers"},[s("img",{attrs:{src:"/img/cardgen/hp_modify.png"}}),t._v(" "),s("span",[t._v(t._s(t.card.hp))])]):t._e(),t._v(" "),0!=t.card.gold?s("div",{staticClass:"gold_modify modifiers"},[s("img",{attrs:{src:"/img/cardgen/gold_modify.png"}}),t._v(" "),s("span",[t._v(t._s(t.card.gold))])]):t._e()]),t._v(" "),this.admin&&this.assign?s("div",{staticStyle:{"text-align":"center"}},[s("button",{staticClass:"button is-dark",on:{click:t.assignCard}},[s("i",{staticClass:"fas fa-arrow-up"}),t._v(" "+t._s(t.trans.get("general.assign"))+"\n    ")])]):t._e(),t._v(" "),this.admin&&this.import?s("div",{staticStyle:{"text-align":"center"}},[s("button",{staticClass:"button is-success",on:{click:t.importCard}},[s("i",{staticClass:"fas fa-arrow-up"}),t._v(" "+t._s(t.trans.get("general.import"))+"\n    ")])]):t._e(),t._v(" "),this.admin&&this.properties&&!this.assign?s("div",{staticStyle:{"text-align":"center"}},[s("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"button is-dark",attrs:{href:"/classroom/"+t.code+"/cards/"+t.card.id,type:"submit",content:t.trans.get("general.edit")}},[s("i",{staticClass:"fas fa-edit"})]),t._v(" "),s("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"button is-danger",attrs:{type:"submit",content:t.trans.get("general.delete")},on:{click:t.confirmDelete}},[s("i",{staticClass:"fas fa-trash-alt"})]),t._v(" "),t.card.own?s("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"button is-primary",attrs:{type:"submit",content:t.trans.get("cards.share")},on:{click:t.share}},[s("i",{staticClass:"fas fa-share-alt"})]):t._e()]):t._e()])}),[],!1,null,null,null);a.default=c.exports}}]);