(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{LVYR:function(t,a,e){"use strict";e.r(a);var i=e("o0O0"),s={props:["code"],created:function(){this.audio=new Audio("/sound/alarm.mp3")},data:function(){return{audioContext:null,meter:null,canvasContext:null,width:400,height:50,rafID:null,sttoped:!0,tolerance:5,prevTime:0,audio:null,alarmCount:0,countHp:0,countXp:0,countGold:0,hp:1,xp:5,gold:10}},computed:{},mounted:function(){},methods:{accept:function(){var t=this;axios.post("/classroom/"+this.code+"/utils/meter",{gold:this.gold*this.alarmCount*this.countGold*-1,hp:this.hp*this.alarmCount*this.countHp*-1,xp:this.xp*this.alarmCount*this.countXp*-1}).then((function(a){location.href="/classroom/"+t.code}))},deleteLog:function(){this.alarmCount--},onMicrophoneDenied:function(){alert("It's mandatory to grant microphone access")},onLevelChange:function(t){this.canvasContext.clearRect(0,0,this.width,this.height),this.meter.checkClipping()?this.canvasContext.fillStyle="red":this.canvasContext.fillStyle="green",t-this.prevTime>1500&&!this.stopped&&(this.meter.volume>this.tolerance/20&&(this.audio.play(),this.alarmCount++),this.prevTime=t),this.canvasContext.fillRect(0,0,this.meter.volume*this.width*1.4,this.height),this.rafID=window.requestAnimationFrame(this.onLevelChange)},onMicrophoneGranted:function(t){var a=this.audioContext.createMediaStreamSource(t);this.meter=i.default.createAudioMeter(this.audioContext),a.connect(this.meter),this.onLevelChange()},start:function(){this.stopped=!1,this.canvasContext=this.$refs.meter.getContext("2d"),window.AudioContext=window.AudioContext||window.webkitAudioContext,this.audioContext=new AudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,void 0===navigator.mediaDevices.getUserMedia?navigator.getUserMedia({audio:!0},this.onMicrophoneGranted,this.onMicrophoneDenied):navigator.mediaDevices.getUserMedia({audio:!0}).then(this.onMicrophoneGranted)}}},o=(e("i4q4"),e("KHd+")),n=Object(o.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"p-2"},[e("div",[e("div",[t._m(0),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("div",{staticClass:"propertyMeter p-3"},[e("b-switch",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.countGold,callback:function(a){t.countGold=a},expression:"countGold"}},[e("i",{staticClass:"fas fa-coins colored"})]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.gold,expression:"gold"}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.gold},on:{input:function(a){a.target.composing||(t.gold=a.target.value)}}})],1),t._v(" "),e("div",{staticClass:"propertyMeter p-3"},[e("b-switch",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.countXp,callback:function(a){t.countXp=a},expression:"countXp"}},[e("i",{staticClass:"fas fa-fist-raised colored"})]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.xp,expression:"xp"}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.xp},on:{input:function(a){a.target.composing||(t.xp=a.target.value)}}})],1),t._v(" "),e("div",{staticClass:"propertyMeter p-3"},[e("b-switch",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.countHp,callback:function(a){t.countHp=a},expression:"countHp"}},[e("i",{staticClass:"fas fa-heart colored"})]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.hp,expression:"hp"}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.hp},on:{input:function(a){a.target.composing||(t.hp=a.target.value)}}})],1)]),t._v(" "),e("div",{staticClass:"column"},[e("div",{attrs:{id:"info"}},[e("span",{staticClass:"tag tag fa-2x m-2 is-size-5 p-4"},[e("span",[t._v(t._s(t.alarmCount))]),t._v(" "),e("i",{staticClass:"fas fa-siren-on colored"})]),t._v(" "),e("span",{staticClass:"tag tag is-warning fa-2x m-2 is-size-5 p-4"},[e("span",[t._v(t._s(t.gold*t.alarmCount*t.countGold*-1))]),t._v(" "),e("i",{staticClass:"fas fa-coins colored"})]),t._v(" "),e("span",{staticClass:"tag tag is-dark fa-2x m-2 is-size-5 p-4"},[e("span",[t._v(t._s(t.xp*t.alarmCount*t.countXp*-1))]),t._v(" "),e("i",{staticClass:"fas fa-fist-raised colored"})]),t._v(" "),e("span",{staticClass:"tag tag is-danger fa-2x m-2 is-size-5 p-4"},[e("span",[t._v(t._s(t.hp*t.alarmCount*t.countHp*-1))]),t._v(" "),e("i",{staticClass:"fas fa-heart colored"})]),t._v(" "),e("span",{staticClass:"button is-size-6 acceptDestiny ml-2",staticStyle:{"margin-top":"0!important"},on:{click:t.accept}},[e("i",{staticClass:"fas fa-feather-alt"}),t._v(" Accept\n            ")])])])]),t._v(" "),e("br"),t._v(" "),t._m(1),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tolerance,expression:"tolerance"}],staticStyle:{width:"100%"},attrs:{type:"range",min:"0",id:"tolerance",max:"10"},domProps:{value:t.tolerance},on:{__r:function(a){t.tolerance=a.target.value}}}),t._v(" "),e("br"),t._v(" "),e("canvas",{ref:"meter",staticClass:"mt-3",staticStyle:{width:"100%"},attrs:{id:"meter",height:"30"}}),t._v(" "),e("button",{staticClass:"button is-primary mt-3 start",on:{click:t.start}},[e("i",{staticClass:"fas fa-play mr-2"}),t._v(" Start\n      ")]),t._v(" "),e("button",{staticClass:"button is-dark",on:{click:function(a){t.stopped=!0}}},[e("i",{staticClass:"fas fa-stop mr-2"}),t._v(" Stop\n      ")])]),t._v(" "),e("div",{attrs:{id:"log"}},t._l(t.alarmCount,(function(a){return e("div",{key:a,staticClass:"p-4 m-3 itemLog"},[e("span",{staticClass:"tag is-dark"},[t._v(t._s(a))]),t._v(" Ruido detectado\n        "),e("div",{staticClass:"has-background-danger p-4 delLog",on:{click:t.deleteLog}},[e("i",{staticClass:"fas fa-trash"})])])})),0)])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"rounded has-background-warning p-4 mb-3"},[a("strong",[a("i",{staticClass:"fas fa-flask"}),this._v(" Funci√≥n experimental\n        ")]),this._v(" "),a("i",{staticClass:"fas fa-info-square"}),this._v(" Haz start y prueba los valores de tolerancia antes de activar las penalizaciones.\n      ")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"sensitivity"},[a("i",{staticClass:"fal fa-tachometer-slowest fa-2x left"}),this._v(" "),a("i",{staticClass:"fal fa-tachometer-average fa-2x center"}),this._v(" "),a("i",{staticClass:"fal fa-tachometer-fastest fa-2x right"})])}],!1,null,null,null);a.default=n.exports},UO0R:function(t,a,e){var i=e("njGD");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(i,s);i.locals&&(t.exports=i.locals)},i4q4:function(t,a,e){"use strict";var i=e("UO0R");e.n(i).a},njGD:function(t,a,e){(t.exports=e("I1BE")(!1)).push([t.i,"#meter{padding:20px;background-color:hsla(0,0%,100%,.8);border-radius:10px;clear:both}.propertyMeter{display:inline-block;width:40%}.itemLog{padding:20px;background-color:hsla(0,0%,100%,.8);border:1px solid #555;border-radius:5px}.bootstrapInlineForm{width:60%}.sensitivity{margin-top:35px;position:relative;padding-bottom:15px}.sensitivity .left{left:0}.sensitivity .center,.sensitivity .left{padding:4px;background-color:#fff;position:absolute;top:-21px;border-radius:4px}.sensitivity .center{left:50%;margin-left:-20px}.sensitivity .right{padding:4px;background-color:#fff;position:absolute;top:-21px;right:0;border-radius:4px}.itemLog{position:relative}.delLog{position:absolute;top:0;right:0;padding:20px;color:#fff;height:100%;cursor:pointer}#info,.delLog{display:flex;align-items:center;align-content:center}.acceptDestiny{cursor:pointer}@media screen and (max-width:700px){.flexC{display:block}}",""])}}]);