(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{Ldzz:function(t,s,e){"use strict";e.r(s);var o=e("gf5B"),n={name:"StudentCard",props:["data"],methods:{}},r=e("KHd+"),a=Object(r.a)(n,(function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"cc-card box m-2"},[s("h5",[this._v(this._s(this.data.name))])])}),[],!1,null,null,null).exports,u={props:["groups","code","students"],mounted:function(){var t=this;this.csrfToken=document.querySelector('meta[name="csrf-token"]').content;var s=[];this.groups.forEach((function(e){var o=[];t.students.forEach((function(t){t.groups.forEach((function(n){n.id==e.id&&(o.push(t),s.push(t.id))}))})),t.dropGroups.push({id:e.id,name:e.name,logo:e.logo,children:o})})),s.forEach((function(s){var e=t.$refs.dnditems.items.findIndex((function(t){return t.id===s}));t.$refs.dnditems.items.splice(e,1)}))},data:function(){return{csrfToken:null,groupsNumber:5,dropGroups:[],editGroups:!1}},components:{DragDrop:o.a,CustomCard:a},methods:{createGroups:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t||(t=this.groupsNumber),axios.post("/classroom/"+this.code+"/groups/create",{groupsNumber:t}).then((function(t){location.reload()}))},save:function(){var t=this;axios.patch("/classroom/"+this.code+"/groups/students",{_method:"patch",dropGroups:this.dropGroups}).then((function(s){t.$toast(t.trans.get("success_error.update_success"),{type:"success"})}))},cancel:function(){location.reload()}}},i=Object(r.a)(u,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content p-2"},[t.groups.length?t._e():e("form",{attrs:{method:"post",action:""},on:{submit:function(s){return s.preventDefault(),t.createGroups()}}},[e("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrfToken}}),t._v(" "),e("div",{staticClass:"p-4"},[e("div",[e("span",{staticClass:"my-2"},[t._v(t._s(t.trans.get("groups.number_groups")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.groupsNumber,expression:"groupsNumber"}],staticClass:"input mt-3",attrs:{type:"number"},domProps:{value:t.groupsNumber},on:{input:function(s){s.target.composing||(t.groupsNumber=s.target.value)}}})]),t._v(" "),e("button",{staticClass:"button is-primary mt-3"},[t._v("\n        "+t._s(t.trans.get("groups.create"))+"\n      ")])])]),t._v(" "),t.groups.length?e("div",[e("button",{staticClass:"button is-link",on:{click:function(s){return t.createGroups(1)}}},[t._v("\n      "+t._s(t.trans.get("groups.new_group"))+"\n    ")]),t._v(" "),e("button",{staticClass:"button is-primary",on:{click:function(s){t.editGroups=!t.editGroups}}},[t._v("\n      "+t._s(t.trans.get("groups.edit_groups"))+"\n    ")]),t._v(" "),t.editGroups?e("div",[e("div",{staticClass:"m-3 columns is-multiline is-variable"},t._l(t.dropGroups,(function(s){return e("div",{key:s.id,staticClass:"column is-6-tablet is-12-mobile is-3-desktop"},[e("edit-group",{attrs:{group:s,code:t.code}})],1)})),0)]):e("drag-drop",{ref:"dnditems",staticClass:"mt-3",attrs:{dropzones:t.dropGroups,dropzonesTitle:"Groups",originalData:t.students,originalTitle:"Students",inPlace:!0},on:{save:t.save,cancel:t.cancel},scopedSlots:t._u([{key:"dd-card",fn:function(t){var s=t.cardData;return[e("custom-card",{attrs:{data:s}})]}}],null,!1,3993616045)})],1):t._e()])}),[],!1,null,null,null);s.default=i.exports}}]);