(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"/x+h":function(t,e,i){(t.exports=i("I1BE")(!1)).push([t.i,".rubricRow{overflow-x:auto}.rubricSubitems{display:flex}.marginRadius{border:1px solid #575757;margin:5px;padding:30px;border-radius:10px}.rubricSubitem{flex-grow:1;position:relative}.rubricDetails{font-size:1.5em;padding-right:35px}.rubricSubitem:hover{cursor:pointer}.rubricSubitem:hover,.selectedSubItem{background-color:#dcedc8}.rubricScore{position:absolute;top:0;right:0;background-color:#ffe0b2;border-top-right-radius:8px;border-bottom-right-radius:8px;border-left:1px solid #575757;height:100%;text-align:center;box-sizing:border-box;padding:20px;font-size:1.25em;display:flex;align-items:center;justify-content:center;font-weight:700}.rubricInfo{padding:30px;background-color:#fafafa;margin:-10px -10px 10px;position:-webkit-sticky;position:sticky;top:0;z-index:9;border-bottom:1px solid #575757}.rubricInfo h2{padding-right:90px}.optional{background-color:#cfd8dc}",""])},HcTK:function(t,e,i){var a=i("/x+h");"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,s);a.locals&&(t.exports=a.locals)},"K/Lj":function(t,e,i){"use strict";i.r(e);var a={props:["classroom","evaluable","students","rubric","settings"],created:function(){},data:function(){return{showRubric:!1,studentActive:null,grade:null,rowsSelected:[],isLoading:!1}},methods:{selectItem:function(t,e,i){var a=document.querySelector("[item=item"+i.id+"]");document.querySelectorAll("[row=row"+e+"]").forEach((function(t){t.classList.remove("selectedSubItem")})),a.classList.add("selectedSubItem"),this.recalculate()},recalculate:function(){var t=0,e=0;document.querySelectorAll(".rubricSubitems:not([data-info=data-optional]) .rubricSubitem.selectedSubItem").forEach((function(t){e+=parseFloat(t.querySelector(".rubricScore").innerHTML)})),document.querySelectorAll(".rubricSubitems:not([data-info=data-optional])").forEach((function(e){var i=0;e.querySelectorAll(".rubricSubitem").forEach((function(t){var e=parseFloat(t.querySelector(".rubricScore").innerHTML);e>i&&(i=e)})),t+=i})),this.grade=Math.min(this.settings.eval_max,Math.round(100*(e/t*this.settings.eval_max+0))/100)},loadRubric:function(t){var e=this;this.isLoading=!0,this.grade=null,this.showRubric=!0,this.studentActive=t,axios.post("/classroom/evaluation/student/rubric",{student:t.id,rubric:this.rubric.id}).then((function(t){e.isLoading=!1,t.data.forEach((function(t){document.querySelector("[row=row"+t[0]+"][item=item"+t[1]+"]").classList.add("selectedSubItem"),e.recalculate()}))}))},gradeRubric:function(){var t=this,e=this;document.querySelectorAll(".selectedSubItem").forEach((function(t){e.rowsSelected.push([t.getAttribute("row").replace("row",""),t.getAttribute("item").replace("item","")])})),axios.post("/classroom/evaluation/"+this.evaluable.id+"/evaluate/rubric",{student:this.studentActive.id,rows:this.rowsSelected}).then((function(e){t.studentActive.grade=t.grade,t.studentActive=null,t.showRubric=!1,t.rowsSelected=[]}))},save:function(){var t=this;axios.post("/classroom/evaluation/"+this.evaluable.id+"/evaluate",{grades:this.students}).then((function(e){t.$toast(t.trans.get("success_error.update_success"),{type:"success"})}))}},components:{}},s=(i("i8dp"),i("KHd+")),r=Object(s.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w-100 p-2 content"},[i("form",{on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[t._l(t.students,(function(e){return i("div",{key:e.id},[i("div",{staticClass:"column is-flex align-items-center is-size-4"},[t._v("\n        "+t._s(e.name)+"\n      ")]),t._v(" "),i("div",{staticClass:"columns"},[1==t.evaluable.type?i("div",{staticClass:"column is-narrow"},[i("button",{staticClass:"button is-info",on:{click:function(i){return i.preventDefault(),t.loadRubric(e)}}},[t._v("\n            Rubric\n          ")])]):t._e(),t._v(" "),i("div",{staticClass:"column is-narrow"},[i("div",{staticClass:"field"},[i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.grade,expression:"student.grade"}],staticClass:"input",attrs:{step:"0.01",type:"number",min:"0",max:t.settings.eval_max,placeholder:"Grade"},domProps:{value:e.grade},on:{input:function(i){i.target.composing||t.$set(e,"grade",i.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"column"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.feedback,expression:"student.feedback"}],staticClass:"input",attrs:{placeholder:"Feedback"},domProps:{value:e.feedback},on:{input:function(i){i.target.composing||t.$set(e,"feedback",i.target.value)}}})]),t._v(" "),i("hr",{staticStyle:{"background-color":"black"}})])])})),t._v(" "),i("button",{staticClass:"button is-primary mt-4"},[i("i",{staticClass:"fas fa-save mr-3"}),t._v("\n      "+t._s(t.trans.get("general.save"))+"\n    ")])],2),t._v(" "),i("b-loading",{attrs:{"is-full-page":!0,active:t.isLoading,"can-cancel":!0},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),null!=t.studentActive?i("b-modal",{attrs:{active:t.showRubric,"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-modal":"","full-screen":""},on:{"update:active":function(e){t.showRubric=e}}},[i("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[i("header",{staticClass:"modal-card-head"},[i("p",{staticClass:"modal-card-title"},[t._v(t._s(t.studentActive.name))])]),t._v(" "),i("section",{staticClass:"modal-card-body"},t._l(t.rubric.rows,(function(e){return i("div",{key:e.id,staticClass:"div_rounded rubricRow marginRadius"},[i("h2",{staticClass:"description"},[t._v(t._s(e.description))]),t._v(" "),i("div",{staticClass:"rubricSubitems"},t._l(e.items,(function(a){return i("div",{key:a.id,staticClass:"rubricSubitem marginRadius",attrs:{row:"row"+e.id,item:"item"+a.id},on:{click:function(i){return t.selectItem(i.target,e.id,a)}}},[i("div",{staticClass:"rubricDetails"},[t._v(t._s(a.description))]),t._v(" "),i("div",{staticClass:"rubricScore"},[t._v(t._s(a.points))])])})),0)])})),0),t._v(" "),i("footer",{staticClass:"modal-card-foot"},[i("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.studentActive=null,t.showRubric=!1}}},[t._v("\n          Close\n        ")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.grade,expression:"grade"}],staticClass:"input mr-3",staticStyle:{width:"100px"},attrs:{type:"number"},domProps:{value:t.grade},on:{input:function(e){e.target.composing||(t.grade=e.target.value)}}}),t._v(" "),i("button",{staticClass:"button is-primary",on:{click:t.gradeRubric}},[t._v("Grade")])])])]):t._e()],1)}),[],!1,null,null,null);e.default=r.exports},i8dp:function(t,e,i){"use strict";var a=i("HcTK");i.n(a).a}}]);