(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"7Vev":function(s,t,e){"use strict";e.r(t);var a={props:["user","lang"],mounted:function(){this.name=this.user.name,this.user_lang=this.user.locale,this.email=this.user.email},data:function(){return{name:"",current_password:"",password:"",password_confirm:"",user_lang:"",email_change:!1,email:"",_method:"patch"}},methods:{promote:function(){this.$buefy.dialog.confirm({title:this.trans.get("profile.only_teachers_title"),message:this.trans.get("profile.only_teachers"),confirmText:this.trans.get("profile.only_teachers_accept"),cancelText:this.trans.get("general.cancel"),type:"is-warning",hasIcon:!0,icon:"exclamation-triangle",iconPack:"fa",ariaRole:"alertdialog",ariaModal:!0,onConfirm:function(){axios.get("/profile/promote").then((function(s){location.href="/classroom"}))}})},axiosSend:function(){var s=this;axios.patch("/profile/update",this.$data).then((function(t){s.$toast(s.trans.get("profile.update_success"),{type:"success"}),location.reload()})).catch((function(t){s.$toast(s.trans.get("profile.incorrect_password"),{type:"error"})}))},send:function(){var s=this;if(this.password!=this.password_confirm)return this.$refs.new_password.classList.add("is-danger"),this.$refs.password_confirm.classList.add("is-danger"),!1;this.email_change?this.$buefy.dialog.prompt({message:"Please repeat the e-mail",inputAttrs:{placeholder:""},trapFocus:!0,onConfirm:function(t){t==s.email?s.axiosSend():s.$toast("The e-mail verification failed",{type:"error"})}}):this.axiosSend()}}},n=e("KHd+"),i=Object(n.a)(a,(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"p-2"},[e("form",{on:{submit:function(t){return t.preventDefault(),s.send(t)}}},[e("section",{staticClass:"px-3"},[e("h1",{staticClass:"is-size-2"},[e("i",{staticClass:"fal fa-cog faa-spin animated faa-slow"}),s._v("\n        "+s._s(s.trans.get("profile.profile"))+"\n      ")]),s._v(" "),e("div",{staticClass:"my-4"},[e("label",{staticClass:"my-2",attrs:{for:"name"}},[s._v(s._s(s.trans.get("profile.name")))]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.name,expression:"name"}],staticClass:"input my-2 is-info",attrs:{id:"name",type:"text",minlength:"2",name:"name",required:"",autocomplete:"name",autofocus:""},domProps:{value:s.name},on:{input:function(t){t.target.composing||(s.name=t.target.value)}}})]),s._v(" "),s.user.email?e("span",[e("div",{staticClass:"my-4"},[e("label",{staticClass:"my-2",attrs:{for:"new-password"}},[s._v(s._s(s.trans.get("profile.new_password")))]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],ref:"new_password",staticClass:"input my-2 is-info",attrs:{type:"password",name:"password",minlength:"8",autocomplete:"new-password"},domProps:{value:s.password},on:{input:function(t){t.target.composing||(s.password=t.target.value)}}})]),s._v(" "),e("div",{staticClass:"my-4"},[s.password.length?e("label",{staticClass:"my-2",attrs:{for:"password_confirmation"}},[s._v(s._s(s.trans.get("profile.confirm_new_password")))]):s._e(),s._v(" "),s.password.length?e("input",{directives:[{name:"model",rawName:"v-model",value:s.password_confirm,expression:"password_confirm"}],ref:"password_confirm",staticClass:"input my-2 is-info",attrs:{type:"password",minlength:"8",name:"password_confirmation",autocomplete:"new-password"},domProps:{value:s.password_confirm},on:{input:function(t){t.target.composing||(s.password_confirm=t.target.value)}}}):s._e()])]):e("div",{staticClass:"notification is-warning is-light"},[e("i",{staticClass:"fas fa-exclamation-triangle mr-1"}),s._v("\n        "+s._s(s.trans.get("profile.password_email"))+"\n      ")]),s._v(" "),e("div",{staticClass:"mt-4"},[e("label",{staticClass:"my-2",attrs:{for:"new-password"}},[s._v("E-mail")]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.email,expression:"email"}],staticClass:"input my-2 is-info",attrs:{type:"email"},domProps:{value:s.email},on:{input:[function(t){t.target.composing||(s.email=t.target.value)},function(t){s.email_change=!0}]}})]),s._v(" "),e("small",[s._v(s._s(s.trans.get("profile.info_email")))]),s._v(" "),e("div",{staticClass:"my-4"},[s.password.length||s.email_change?e("label",{staticClass:"my-2",attrs:{for:"current-password"}},[s._v(s._s(s.trans.get("profile.current_password")))]):s._e(),s._v(" "),s.password.length||s.email_change?e("input",{directives:[{name:"model",rawName:"v-model",value:s.current_password,expression:"current_password"}],staticClass:"input my-2 is-info",attrs:{type:"password",name:"current_password",required:"",autocomplete:"current-password"},domProps:{value:s.current_password},on:{input:function(t){t.target.composing||(s.current_password=t.target.value)}}}):s._e()]),s._v(" "),e("div",{staticClass:"my-4 form-group"},[e("label",{staticClass:"my-2",attrs:{for:"language"}},[s._v(s._s(s.trans.get("profile.language")))]),s._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:s.user_lang,expression:"user_lang"}],staticClass:"form-control input my-2 is-info",attrs:{id:"locale"},on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(s){return s.selected})).map((function(s){return"_value"in s?s._value:s.value}));s.user_lang=t.target.multiple?e:e[0]}}},s._l(s.lang,(function(t,a){return e("option",{key:t,domProps:{value:a}},[s._v("\n            "+s._s(t)+"\n          ")])})),0)]),s._v(" "),1==s.user.is_student&&s.user.email?e("button",{staticClass:"button is-dark",on:{click:function(t){return t.preventDefault(),s.promote(t)}}},[s._v("\n        "+s._s(s.trans.get("profile.upgrade"))+"\n      ")]):s._e(),s._v(" "),e("div",{staticClass:"is-flex px-4 py-4",staticStyle:{position:"fixed",bottom:"0",right:"0"}},[e("button",{staticClass:"button is-link"},[s._v("\n          "+s._s(s.trans.get("profile.edit"))+"\n        ")])])])])])}),[],!1,null,null,null);t.default=i.exports}}]);