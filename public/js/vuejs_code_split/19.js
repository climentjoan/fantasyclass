(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"408D":function(t,e,s){(t.exports=s("I1BE")(!1)).push([t.i,"tr.is-disabled{background:#999;color:#fff}",""])},f3fw:function(t,e,s){var n=s("408D");"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(n,a);n.locals&&(t.exports=n.locals)},uyHk:function(t,e,s){"use strict";var n=s("f3fw");s.n(n).a},w8sO:function(t,e,s){"use strict";s.r(e);var n={props:["classroom","events","disabled"],mounted:function(){},data:function(){return{isModalActive:!1,event:{title:"",content:"",id:null,type:0,options:null,classroom_id:this.classroom.id},edit:!1}},methods:{addEvent:function(t){0==t?""!=this.event.title&&""!=this.event.content&&axios.post("/classroom/events/add",{event:this.event}).then((function(t){location.reload()})):axios.post("/classroom/events/edit",{event:this.event}).then((function(t){location.reload()}))},showAddModal:function(){this.edit=!1,this.event.title="",this.event.content="",this.isModalActive=!0},editModal:function(t){this.event.id=t.id,this.event.title=t.title,this.event.content=t.content,this.edit=!0,this.isModalActive=!0},toggle:function(t){var e=this;axios.post("/classroom/"+this.classroom.code+"/events/disable",{id:t}).then((function(s){if(e.isDisabled(t)){var n=e.disabled.indexOf(t);n>-1&&e.disabled.splice(n,1)}else e.disabled.push(t);e.$forceUpdate()}))},isDisabled:function(t){return this.disabled.includes(t)},confirmDelete:function(t){var e=this;this.$buefy.dialog.confirm({title:this.trans.get("general.delete"),message:this.trans.get("general.confirm_delete"),confirmText:this.trans.get("general.delete"),cancelText:this.trans.get("general.cancel"),type:"is-danger",hasIcon:!0,icon:"times-circle",iconPack:"fa",ariaRole:"alertdialog",ariaModal:!0,onConfirm:function(){var s=e.events.findIndex((function(e,s){return e.id===t}));axios.delete("/classroom/events/"+t).then((function(t){1===t.data&&e.events.splice(s,1)}))}})}}},a=(s("uyHk"),s("KHd+")),i=Object(a.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-2"},[s("button",{staticClass:"button is-primary my-3",on:{click:t.showAddModal}},[t._v("\n    "+t._s(t.trans.get("events.add"))+"\n  ")]),t._v(" "),s("div",{staticClass:"m-0 w-100"},[s("b-table",{attrs:{data:t.events,"default-sort":["id"],"icon-pack":"fas","cell-class":"align-right","sort-icon":"arrow-up","row-class":function(e,s){return t.isDisabled(e.id)&&"is-disabled"}},scopedSlots:t._u([{key:"default",fn:function(e){return[s("b-table-column",{attrs:{field:"name",label:t.trans.get("events.title"),sortable:""}},[s("span",{domProps:{innerHTML:t._s(t.trans.get(e.row.title))}})]),t._v(" "),s("b-table-column",{attrs:{field:"url",label:t.trans.get("events.content"),sortable:""}},[s("span",{domProps:{innerHTML:t._s(t.trans.get(e.row.content))}})]),t._v(" "),s("b-table-column",{staticClass:"w-100 is-flex has-all-centered",attrs:{field:"settings",label:t.trans.get("menu.settings"),centered:""}},[s("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"button is-small mr-3",class:{"is-dark":!t.isDisabled(e.row.id),"is-light":t.isDisabled(e.row.id)},attrs:{content:t.isDisabled(e.row.id)?t.trans.get("general.enable"):t.trans.get("general.disable")},on:{click:function(s){return s.preventDefault(),t.toggle(e.row.id)}}},[t.isDisabled(e.row.id)?s("i",{staticClass:"fas fa-eye"}):s("i",{staticClass:"fas fa-eye-slash"})]),t._v(" "),null!=e.row.classroom_id?s("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"button is-info is-small mr-3",attrs:{content:t.trans.get("general.edit")},on:{click:function(s){return t.editModal(e.row)}}},[s("i",{staticClass:"fas fa-edit"})]):t._e(),t._v(" "),null!=e.row.classroom_id?s("b-button",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{content:t.trans.get("general.delete"),type:"is-danger is-small"},on:{click:function(s){return t.confirmDelete(e.row.id)}}},[s("i",{staticClass:"fas fa-trash-alt"})]):t._e()],1)]}}])})],1),t._v(" "),s("b-modal",{attrs:{active:t.isModalActive,"has-modal-card":"","full-screen":"","can-cancel":!1},on:{"update:active":function(e){t.isModalActive=e}}},[s("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[t._v(t._s(t.trans.get("events.add")))])]),t._v(" "),s("section",{staticClass:"modal-card-body is-relative",attrs:{id:"confetti-bg"}},[s("b-field",{attrs:{label:t.trans.get("events.title")}},[s("b-input",{attrs:{type:"text",minlength:"5",maxlength:"50",required:""},model:{value:t.event.title,callback:function(e){t.$set(t.event,"title",e)},expression:"event.title"}})],1),t._v(" "),s("b-field",{attrs:{label:t.trans.get("events.content")}},[s("b-input",{attrs:{type:"textarea",minlength:"5",maxlength:"200",required:""},model:{value:t.event.content,callback:function(e){t.$set(t.event,"content",e)},expression:"event.content"}})],1),t._v(" "),t.edit?s("button",{staticClass:"button is-info",attrs:{type:"button"},on:{click:function(e){return t.addEvent(1)}}},[t._v("\n          "+t._s(t.trans.get("events.edit"))+"\n        ")]):s("button",{staticClass:"button is-primary",attrs:{type:"button"},on:{click:function(e){return t.addEvent(0)}}},[t._v("\n          "+t._s(t.trans.get("events.add"))+"\n        ")])],1),t._v(" "),s("footer",{staticClass:"modal-card-foot columns is-multiline",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"column is-narrow"},[s("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.isModalActive=!1}}},[t._v("\n            "+t._s(t.trans.get("general.close"))+"\n          ")])])])])])],1)}),[],!1,null,null,null);e.default=i.exports}}]);