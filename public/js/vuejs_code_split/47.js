(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{TVdV:function(i,s,t){"use strict";t.r(s);var e={props:["items","config","code","character","shop"],mounted:function(){},data:function(){return{activeTab:0,items_visibility:this.config.items_visibility,equipment_1_visibility:!!this.config.equipment_1_visibility,equipment_2_visibility:!!this.config.equipment_2_visibility,equipment_3_visibility:!!this.config.equipment_3_visibility,forceUpdate:0,nom:"",visible:!1}},methods:{toggleVisibility:function(i){axios.patch("/classroom/"+this.code+"/setting",{_method:"patch",prop:i,action:"toggle"}).then((function(i){}))},updateForSale:function(i){axios.patch("/classroom/"+this.code+"/shop/forsale",{_method:"patch",id:i.id,for_sale:i.for_sale}).then((function(i){}))},save:function(i){var s,t,e=this;switch(i){case 1:s="shop_multiplier_1",t=this.config.multiplier1;break;case 2:s="shop_multiplier_2",t=this.config.multiplier2;break;case 3:s="shop_multiplier_3",t=this.config.multiplier3}axios.patch("/classroom/"+this.code+"/setting",{_method:"patch",prop:s,value:t,action:"update"}).then((function(i){e.$toast(e.trans.get("success_error.update_success"),{type:"success"})}))},deleteItem:function(i){var s=this;this.$buefy.dialog.confirm({title:this.trans.get("general.delete"),message:this.trans.get("general.confirm_delete"),confirmText:this.trans.get("general.delete"),cancelText:this.trans.get("general.cancel"),type:"is-danger",hasIcon:!0,icon:"times-circle",iconPack:"fa",ariaRole:"alertdialog",ariaModal:!0,onConfirm:function(){var t=s.items.findIndex((function(s,t){return s.id===i}));axios.delete("/classroom/shop/"+i).then((function(i){1===i.data&&(s.items.splice(t,1),s.$forceUpdate())}))}})}},computed:{visibilityItems:function(){return this.items_visibility?"<i class='fas fa-eye-slash'></i> <span class='pl-2'>Make invisible</span>":"<i class='fas fa-eye'></i> <span class='pl-2'>Make visible</span>"},visibilityEq1:function(){return this.equipment_1_visibility?"<i class='fas fa-eye-slash'></i> <span class='pl-2'>Make invisible</span>":"<i class='fas fa-eye'></i> <span class='pl-2'>Make visible</span>"},visibilityEq2:function(){return this.equipment_2_visibility?"<i class='fas fa-eye-slash'></i> <span class='pl-2'>Make invisible</span>":"<i class='fas fa-eye'></i> <span class='pl-2'>Make visible</span>"},visibilityEq3:function(){return this.equipment_3_visibility?"<i class='fas fa-eye-slash'></i> <span class='pl-2'>Make invisible</span>":"<i class='fas fa-eye'></i> <span class='pl-2'>Make visible</span>"},getIconItem:function(){return this.items_visibility?"eye-slash":"eye"}}},a=t("KHd+"),l=Object(a.a)(e,(function(){var i=this,s=i.$createElement,t=i._self._c||s;return t("div",[t("b-tabs",{model:{value:i.activeTab,callback:function(s){i.activeTab=s},expression:"activeTab"}},[t("b-tab-item",{staticClass:"p-4",attrs:{label:"Items","icon-pack":"fa"}},[t("div",{staticClass:"field"},[t("b-switch",{attrs:{value:!0,type:"is-success","passive-type":"is-danger"},on:{input:function(s){return i.toggleVisibility("items_visibility")}},model:{value:i.items_visibility,callback:function(s){i.items_visibility=s},expression:"items_visibility"}},[i._v(i._s(i.trans.get("shop.visibility")))])],1),i._v(" "),t("a",{staticClass:"button is-primary",attrs:{href:"/classroom/"+i.code+"/shop/create"}},[i._v(i._s(i.trans.get("shop.new_item")))]),i._v(" "),i._l(i.items,(function(s){return t("div",{key:s.id,staticClass:"columns is-multiline is-variable is-1 has-all-centered p-3",staticStyle:{"border-bottom":"1px dashed #999"}},[t("div",{staticClass:"column is-narrow is-relative"},[s.min_lvl?t("div",{staticClass:"lvl-item-top-left"},[t("img",{staticClass:"levelCard",attrs:{src:"/img/cardgen/lvl.png"}}),i._v(" "),t("span",{staticClass:"is-flex has-all-centered"},[i._v(i._s(s.min_lvl))])]):i._e(),i._v(" "),t("img",{attrs:{src:s.icon,width:"48px"}})]),i._v(" "),t("div",{staticClass:"column is-narrow"},[t("div",{staticClass:"field is-horizontal"},[t("div",{staticClass:"field-body"},[t("div",{staticClass:"field is-expanded"},[t("div",{staticClass:"field has-addons"},[t("p",{staticClass:"control"},[t("a",{staticClass:"button is-static"},[t("i",{staticClass:"fas fa-heart colored"})])]),i._v(" "),t("p",{staticClass:"control is-expanded"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.hp,expression:"item.hp"}],staticClass:"input",staticStyle:{border:"1px solid"},attrs:{type:"number",disabled:""},domProps:{value:s.hp},on:{input:function(t){t.target.composing||i.$set(s,"hp",t.target.value)}}})])])])])])]),i._v(" "),t("div",{staticClass:"column is-narrow"},[t("div",{staticClass:"field is-horizontal"},[t("div",{staticClass:"field-body"},[t("div",{staticClass:"field is-expanded"},[t("div",{staticClass:"field has-addons"},[t("p",{staticClass:"control"},[t("a",{staticClass:"button is-static"},[t("i",{staticClass:"fas fa-fist-raised colored"})])]),i._v(" "),t("p",{staticClass:"control is-expanded"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.xp,expression:"item.xp"}],staticClass:"input",staticStyle:{border:"1px solid"},attrs:{type:"number",disabled:""},domProps:{value:s.xp},on:{input:function(t){t.target.composing||i.$set(s,"xp",t.target.value)}}})])])])])])]),i._v(" "),t("div",{staticClass:"column is-narrow"},[t("div",{staticClass:"field is-horizontal"},[t("div",{staticClass:"field-body"},[t("div",{staticClass:"field is-expanded"},[t("div",{staticClass:"field has-addons"},[t("p",{staticClass:"control"},[t("a",{staticClass:"button is-static"},[i._v("\n                      Price\n                      "),t("i",{staticClass:"fas fa-coins colored"})])]),i._v(" "),t("p",{staticClass:"control is-expanded"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.price,expression:"item.price"}],staticClass:"input",staticStyle:{border:"1px solid"},attrs:{type:"number",disabled:""},domProps:{value:s.price},on:{input:function(t){t.target.composing||i.$set(s,"price",t.target.value)}}})])])])])])]),i._v(" "),t("div",{staticClass:"column is-narrow"},[t("div",{staticClass:"field"},[t("b-switch",{attrs:{"true-value":"1","false-value":"0"},on:{input:function(t){return i.updateForSale(s)}},model:{value:s.for_sale,callback:function(t){i.$set(s,"for_sale",t)},expression:"item.for_sale"}},[i._v("For sale?")])],1)]),i._v(" "),t("div",{staticClass:"column is-narrow"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:s.description,expression:"item.description"}],staticClass:"input",staticStyle:{border:"1px solid"},attrs:{placeholder:i.trans.get("shop.description"),disabled:""},domProps:{value:s.description},on:{input:function(t){t.target.composing||i.$set(s,"description",t.target.value)}}})]),i._v(" "),t("a",{staticClass:"button",attrs:{href:"/classroom/"+i.code+"/shop/"+s.id}},[t("i",{staticClass:"fas fa-edit"})]),i._v(" "),t("button",{staticClass:"button is-danger ml-2",on:{click:function(t){return i.deleteItem(s.id)}}},[t("i",{staticClass:"fas fa-trash-alt"})])])}))],2),i._v(" "),i.character?t("b-tab-item",{staticClass:"p-4",attrs:{label:i.trans.get("shop.eq1"),"icon-pack":"fa"}},[t("div",{staticClass:"field"},[t("b-switch",{attrs:{value:!0,type:"is-success","passive-type":"is-danger"},on:{input:function(s){return i.toggleVisibility("equipment_1_visibility")}},model:{value:i.equipment_1_visibility,callback:function(s){i.equipment_1_visibility=s},expression:"equipment_1_visibility"}},[i._v(i._s(i.trans.get("shop.visibility")))]),i._v(" "),t("b-field",{staticClass:"mt-4",attrs:{label:i.trans.get("shop.multiplier")}},[t("b-numberinput",{attrs:{"controls-position":"compact",step:".05"},on:{input:function(s){return i.$forceUpdate()}},model:{value:i.config.multiplier1,callback:function(s){i.$set(i.config,"multiplier1",s)},expression:"config.multiplier1"}})],1),i._v(" "),t("button",{staticClass:"button is-primary",on:{click:function(s){return i.save(1)}}},[t("i",{staticClass:"fas fa-save mr-2"}),i._v("\n          "+i._s(i.trans.get("general.save"))+"\n        ")])],1),i._v(" "),i._l(i.shop.eq1,(function(s,e){return t("div",{key:e,staticClass:"is-flex has-border-dark m-2"},i._l(s,(function(s){return t("div",{key:e+"-"+s.id,staticClass:"is-flex has-all-centered m-4 has-border"},[t("img",{staticClass:"mr-3",attrs:{src:"/img/character/"+s.src,width:"50px",height:"50px"}}),i._v("\n          "+i._s(Math.round(s.price*i.config.multiplier1))+"\n          "),t("i",{staticClass:"fas fa-coins colored"})])})),0)}))],2):i._e(),i._v(" "),i.character?t("b-tab-item",{staticClass:"p-4",attrs:{label:i.trans.get("shop.eq2"),"icon-pack":"fa"}},[t("div",{staticClass:"field"},[t("b-switch",{attrs:{value:!0,type:"is-success","passive-type":"is-danger"},on:{input:function(s){return i.toggleVisibility("equipment_2_visibility")}},model:{value:i.equipment_2_visibility,callback:function(s){i.equipment_2_visibility=s},expression:"equipment_2_visibility"}},[i._v(i._s(i.trans.get("shop.visibility")))]),i._v(" "),t("b-field",{staticClass:"mt-4",attrs:{label:i.trans.get("shop.multiplier")}},[t("b-numberinput",{attrs:{"controls-position":"compact",step:".05"},on:{input:function(s){return i.$forceUpdate()}},model:{value:i.config.multiplier2,callback:function(s){i.$set(i.config,"multiplier2",s)},expression:"config.multiplier2"}})],1),i._v(" "),t("button",{staticClass:"button is-primary",on:{click:function(s){return i.save(2)}}},[t("i",{staticClass:"fas fa-save mr-2"}),i._v("\n          "+i._s(i.trans.get("general.save"))+"\n        ")])],1),i._v(" "),i._l(i.shop.eq2,(function(s,e){return t("div",{key:e,staticClass:"is-flex has-border-dark m-2"},i._l(s,(function(s){return t("div",{key:e+"-"+s.id,staticClass:"is-flex has-all-centered m-4 has-border"},[t("img",{staticClass:"mr-3",attrs:{src:"/img/character/"+s.src,width:"50px",height:"50px"}}),i._v("\n          "+i._s(Math.round(s.price*i.config.multiplier2))+"\n          "),t("i",{staticClass:"fas fa-coins colored"})])})),0)}))],2):i._e(),i._v(" "),i.character?t("b-tab-item",{staticClass:"p-4",attrs:{label:i.trans.get("shop.eq3"),"icon-pack":"fa"}},[t("div",{staticClass:"field"},[t("b-switch",{attrs:{value:!0,type:"is-success","passive-type":"is-danger"},on:{input:function(s){return i.toggleVisibility("equipment_3_visibility")}},model:{value:i.equipment_3_visibility,callback:function(s){i.equipment_3_visibility=s},expression:"equipment_3_visibility"}},[i._v(i._s(i.trans.get("shop.visibility")))]),i._v(" "),t("b-field",{staticClass:"mt-4",attrs:{label:i.trans.get("shop.multiplier")}},[t("b-numberinput",{attrs:{"controls-position":"compact",step:".05"},on:{input:function(s){return i.$forceUpdate()}},model:{value:i.config.multiplier3,callback:function(s){i.$set(i.config,"multiplier3",s)},expression:"config.multiplier3"}})],1),i._v(" "),t("button",{staticClass:"button is-primary",on:{click:function(s){return i.save(3)}}},[t("i",{staticClass:"fas fa-save mr-2"}),i._v("\n          "+i._s(i.trans.get("general.save"))+"\n        ")])],1),i._v(" "),i._l(i.shop.eq3,(function(s,e){return t("div",{key:e,staticClass:"is-flex has-border-dark m-2"},i._l(s,(function(s){return t("div",{key:e+"-"+s.id,staticClass:"is-flex has-all-centered m-4 has-border"},[t("img",{staticClass:"mr-3",attrs:{src:"/img/character/"+s.src,width:"50px",height:"50px"}}),i._v("\n          "+i._s(Math.round(s.price*i.config.multiplier3))+"\n          "),t("i",{staticClass:"fas fa-coins colored"})])})),0)}))],2):i._e()],1)],1)}),[],!1,null,null,null);s.default=l.exports}}]);