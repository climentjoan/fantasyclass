(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{vs1o:function(e,t,a){"use strict";a.r(t);var s=a("o0O0"),n={props:["classroom","grades","settings","admin"],created:function(){},data:function(){return{}},methods:{getGradeClass:function(e){return s.default.getGradeClass(e,this.settings.eval_max)},getPassFail:function(e){return s.default.getPassFail(e,this.settings.eval_max)},getEmoji:function(e){return s.default.getEmoji(e,this.settings.eval_max)},getGrade:function(e){var t=0,a=0;return e.evaluables.forEach((function(e){t+=e.grade*e.pivot.weight,a+=e.pivot.weight})),0==t?0:(t/a).toFixed(2)},finalGrade:function(e){var t=this,a=0;return e.grades.forEach((function(e){a+=t.getGrade(e)*e.percent/100})),a.toFixed(2)},exportReport:function(){for(var e=document.getElementById("evaluationReport"),t=e.getElementsByTagName("th"),a=e.getElementsByTagName("tr"),s=[],n=new Array,r=0;r<t.length;r++){var i=t[r].innerHTML.replace(/(<([^>]+)>)/gi,"");i=(i=i.replace(/(\r\n|\n|\r)/gm,"")).replace(/\s{2,}/g,""),s.push(i.trim())}for(r=0;r<a.length;r++){for(var l=[],o=a[r].cells,c=0;c<o.length;c++){var g=o[c].innerHTML.replace(/(<([^>]+)>)/gi,"");g=g.replace(/(\r\n|\n|\r)/gm,""),l.push(g.trim())}n.push(l)}axios.post("/classroom/evaluation/exportEvaluationReport/",{headings:s,values:n},{responseType:"blob"}).then((function(e){var t=new Blob([e.data],{type:e.data.type}),a=document.createElement("a");a.href=URL.createObjectURL(t);var s=e.headers["content-disposition"],n="unknown";if(s){var r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(s);null!=r&&r[1]&&(n=r[1].replace(/['"]/g,""))}a.download=n,a.click(),URL.revokeObjectURL(a.href)}))}}},r=a("KHd+"),i=Object(r.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-100 p-2 content"},[a("button",{staticClass:"button is-dark noprint",on:{click:e.print}},[a("i",{staticClass:"fas fa-print"})]),e._v(" "),a("button",{staticClass:"button is-success noprint",attrs:{formtarget:"_blank"},on:{click:e.exportReport}},[a("i",{staticClass:"fas fa-file-excel"})]),e._v(" "),a("table",{staticClass:"grades has-background-light mt-3",attrs:{id:"evaluationReport"}},[a("th",[e._v(e._s(e.trans.get("evaluation.student")))]),e._v(" "),e._l(e.grades[0].grades,(function(t,s){return a("th",{key:s+"-"+t.id},[e._v("\n            "+e._s(t.name)+"\n            "),a("br"),e._v("\n            ("+e._s(t.percent)+" %)\n        ")])})),e._v(" "),a("th",[e._v("Total")]),e._v(" "),a("tbody",e._l(e.grades,(function(t){return a("tr",{key:t.student_id},[a("td",[e._v(e._s(t.name))]),e._v(" "),e._l(t.grades,(function(t){return a("td",{key:t.id},[e.admin||1!=e.settings.eval_type&&2!=e.settings.eval_type?a("span",[a("span",{staticClass:"tag is-size-6",class:e.getGradeClass(e.getGrade(t))},[e._v(e._s(e.getGrade(t)))])]):e._e(),e._v(" "),1==e.settings.eval_type?a("span",[a("i",{class:"fas "+e.getEmoji(e.getGrade(t))+" rateEmoji"})]):e._e(),e._v(" "),2==e.settings.eval_type?a("span",{staticClass:"tag",class:e.getGradeClass(e.getGrade(t))},[a("i",{class:"fas "+e.getPassFail(e.getGrade(t))})]):e._e()])})),e._v(" "),a("td",[e.admin||1!=e.settings.eval_type&&2!=e.settings.eval_type?a("span",[a("span",{staticClass:"tag is-size-6",class:e.getGradeClass(e.finalGrade(t))},[e._v(e._s(e.finalGrade(t))+" / "+e._s(e.settings.eval_max))])]):e._e(),e._v(" "),1==e.settings.eval_type?a("span",[a("i",{class:"fas "+e.getEmoji(e.finalGrade(t))+" rateEmoji"})]):e._e(),e._v(" "),2==e.settings.eval_type?a("span",{staticClass:"tag",class:e.getGradeClass(e.finalGrade(t))},[a("i",{class:"fas "+e.getPassFail(e.finalGrade(t))})]):e._e()])],2)})),0)],2)])}),[],!1,null,null,null);t.default=i.exports}}]);