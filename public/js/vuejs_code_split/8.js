(window.webpackJsonp=window.webpackJsonp||[]).push([[8,34],{"1crk":function(e,t,a){"use strict";a.r(t);var s=a("cSmn"),n=a("o0O0"),i=a("RKHd"),l={props:["challenge","edit","admin","code","full","prevRating","students"],created:function(){this.challengeReactive=this.challenge},data:function(){return{rating:"",challengeReactive:null,allowComment:!1,maxComments:3,isAttachmentModalActive:!1,isQuestionModalActive:!1,attachment:{mode:"0",type:null,name:"",url:"",challenge_id:null},question:{challenge_id:null,question:"",correctAnswer:"",incorrectAnswer1:"",incorrectAnswer2:"",incorrectAnswer3:""},comment:""}},components:{InputEmoji:function(){return Promise.all([a.e(2),a.e(6)]).then(a.bind(null,"wvrY"))},VueReactionEmoji:i.VueReactionEmoji,VueFeedbackReaction:i.VueFeedbackReaction},methods:{editChallenge:function(e){var t=this;axios.post("/classroom/"+this.code+"/challenges/info",{type:2}).then((function(e){t.$parent.students=e.data,t.$parent.challengeEdit=t.challenge,t.$parent.addChallenge=!0}))},returnEmoji:function(e){return e<1.8?"hate":e<2.5?"disappointed":e<3.4?"natural":e<4.2?"good":"excellent"},sendRating:function(){var e=this;axios.post("/classroom/challenge/rate",{rating:this.rating,challenge:this.challenge.id}).then((function(t){e.$toast(e.trans.get("general.thanks"),{type:"success"})}))},getHp5:function(e){return"https://h5p.org/h5p/embed/"+e.substring(e.lastIndexOf("/")+1)},getContent:function(e){return!this.admin&&e?n.default.replaceSpecial(e):e},deleteComment:function(e){var t=this;axios.delete("/classroom/challenge/comment/"+e).then((function(a){var s=t.challenge.comments.findIndex((function(t,a){return t.id===e}));t.challenge.comments.splice(s,1),t.$forceUpdate()}))},sendComment:function(){var e=this;this.comment=this.comment.replace("&nbsp;"," "),axios.post("/classroom/challenge/comment",{challenge_id:this.challenge.id,text:this.comment}).then((function(t){e.challenge.comments.push(t.data),e.comment=""}))},confirmDelete:function(e,t){var a=this;this.$buefy.dialog.confirm({title:this.trans.get("general.delete"),message:this.trans.get("general.confirm_delete"),confirmText:this.trans.get("general.delete"),cancelText:this.trans.get("general.cancel"),type:"is-danger",hasIcon:!0,icon:"times-circle",iconPack:"fa",ariaRole:"alertdialog",ariaModal:!0,onConfirm:function(){axios.delete("/classroom/challenge/attachment/"+e).then((function(e){1===e.data&&(a.challenge.attachments.splice(t,1),a.$forceUpdate())}))}})},getYoutube:function(e){return n.default.getYoutube(e)},addQuestion:function(){var e=this;this.question.challenge_id=this.challenge.id,axios.post("/classroom/challenge/question",{question:this.question}).then((function(t){e.isQuestionModalActive=!1,e.$parent.$parent.getChallenges(e.challenge.challenges_group_id)}))},addAttachment:function(){var e=this,t=this.attachment.type;3!=t&&4!=t&&6!=t&&7!=t||(this.attachment.mode=0),this.attachment.challenge_id=this.challenge.id,axios.post("/classroom/challenge/attachment",{attachment:this.attachment}).then((function(t){e.isAttachmentModalActive=!1,e.challenge.attachments.push(t.data)}))},markCompleted:function(e){var t=this;this.$buefy.dialog.confirm({title:this.trans.get("challenges.mark_title"),message:this.trans.get("challenges.mark_text"),confirmText:this.trans.get("challenges.mark_confirm"),cancelText:this.trans.get("general.cancel"),type:"is-warning",iconPack:"fa",hasIcon:!0,onConfirm:function(){axios.post("/classroom/"+t.code+"/student/markchallenge",{challenge:t.challengeReactive.id}).then((function(e){1==e.data.success&&(Object(s.a)({particleCount:200,spread:100,origin:{y:1}}),t.challengeReactive.count++,t.$parent.$parent.$parent.student.hp=e.data.hp,t.$parent.$parent.$parent.student.xp=e.data.xp,t.$parent.$parent.$parent.student.gold=e.data.gold,t.$parent.$parent.$parent.forceReload++)}))}})}},computed:{orderedComments:function(){return _.orderBy(this.challenge.comments,"created_at","desc").splice(0,this.maxComments)},checkCompletion:function(){return 1==this.challengeReactive.completion?1==this.challengeReactive.count:2==this.challengeReactive.completion?2==this.challengeReactive.count:void 0},isHidden:function(){var e=new Date;return e=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes(),this.challengeReactive.datetime.split(":00")[0]>e},getBackground:function(){if(this.full)return 1==this.challengeReactive.is_conquer?"has-background-conquer":"has-background-story";if(this.edit)return this.isHidden?"has-background-light":"";switch(this.challengeReactive.completion){case 0:case 1:return 1==this.challengeReactive.count?"has-background-success-light":"has-background-danger-light";case 2:return 2==this.challengeReactive.count?"has-background-success-light":"has-background-danger-light"}}}},c=a("KHd+"),o=Object(c.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box card-shadow-s mb-3",class:e.getBackground},[a("section",{staticClass:"media"},[a("div",{staticClass:"media-content is-relative"},[!e.admin&&e.full?a("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"challenge-category has-background-light",attrs:{content:e.challengeReactive.group.name}},[a("i",{class:e.challengeReactive.group.icon})]):e._e(),e._v(" "),e.admin&&e.isHidden?a("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"challenge-category has-background-light",attrs:{content:e.trans.get("challenges.hidden_until")+" "+e.challenge.datetime.split(":00")[0]}},[a("i",{staticClass:"fas fa-eye-slash"})]):e._e(),e._v(" "),a("div",{staticClass:"content"},[a("h1",[e.challengeReactive.is_conquer&&e.challengeReactive.icon?a("i",{staticClass:"is-size-4",class:e.challengeReactive.icon+" colored",style:"color:"+e.challengeReactive.color}):e._e(),e._v(" "),1==e.challengeReactive.type?a("i",{staticClass:"fas fa-users is-size-4 colored"}):e._e(),e._v("\n          "+e._s(e.challengeReactive.title)+"\n          "),a("span",{staticClass:"tag is-light"},[e._v(e._s(e.challengeReactive.datetime.split(":00")[0]))])]),e._v(" "),a("p",[a("small",[e._v(e._s(e.challengeReactive.description))])]),e._v(" "),e.challengeReactive.is_conquer?a("p",[0!=e.challengeReactive.xp?a("small",[a("i",{staticClass:"fas fa-fist-raised colored"}),e._v("\n            "+e._s(e.challengeReactive.xp)+"\n          ")]):e._e(),e._v(" "),0!=e.challengeReactive.hp?a("small",[a("i",{staticClass:"fas fa-heart colored"}),e._v("\n            "+e._s(e.challengeReactive.hp)+"\n          ")]):e._e(),e._v(" "),0!=e.challengeReactive.gold?a("small",[a("i",{staticClass:"fas fa-coins colored"}),e._v("\n            "+e._s(e.challengeReactive.gold)+"\n          ")]):e._e(),e._v(" "),0!=e.challengeReactive.cards?a("small",[a("i",{staticClass:"fas fa-club colored"}),e._v("\n            "+e._s(e.challengeReactive.cards)+"\n          ")]):e._e()]):e._e(),e._v(" "),e.full||e.admin?e._e():a("a",{staticClass:"button",attrs:{href:"/classroom/show/"+this.code+"/challenges/"+e.challengeReactive.permalink}},[e._v(e._s(e.trans.get("challenges.show_challenge")))]),e._v(" "),e.edit||e.full?a("div",{domProps:{innerHTML:e._s(e.getContent(e.challengeReactive.content))}}):e._e(),e._v(" "),e._l(e.challenge.questioninfo,(function(t,s){return a("div",{key:s},[a("show-question",{attrs:{admin:e.admin,question:t}})],1)})),e._v(" "),e._l(e.challenge.stats,(function(t,s){return a("div",{key:s},[a("show-question",{attrs:{admin:e.admin,index:s,question:t}})],1)})),e._v(" "),a("div",{staticClass:"mt-5"},e._l(e.challenge.attachments,(function(t,s){return a("div",{key:t.id,staticClass:"columns p-4 m-3 card rounded card-shadow-s"},[a("div",{staticClass:"column is-narrow"},[1==t.type?a("i",{staticClass:"fad fa-globe"}):2==t.type||8==t.type?a("i",{staticClass:"fad fa-icons"}):3==t.type?a("i",{staticClass:"fad fa-graduation-cap"}):4==t.type?a("i",{staticClass:"fab fa-google-drive"}):5==t.type?a("i",{staticClass:"fab fa-youtube"}):6==t.type?a("i",{staticClass:"fab fa-dropbox"}):7==t.type?a("i",{staticClass:"fad fa-file"}):e._e(),e._v(" "),a("i",{staticClass:"fad ml-3",class:{"fa-link":0==t.mode,"fa-expand":1==t.mode}})]),e._v(" "),a("div",{staticClass:"column",staticStyle:{"word-break":"break-all"}},[0==t.mode?a("a",{attrs:{target:"_blank",href:t.url}},[e._v(e._s(t.name?t.name:t.url))]):e._e(),e._v(" "),1==t.mode?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{position:"relative","padding-bottom":"46.57%","padding-top":"0",height:"0"}},[8==t.type?a("iframe",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{src:e.getHp5(t.url),width:"1090",height:"677",frameborder:"0",allowfullscreen:"allowfullscreen",allow:"geolocation *; microphone *; camera *; midi *; encrypted-media *"}}):e._e(),e._v(" "),2==t.type?a("iframe",{staticClass:"rounded",staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{frameborder:"0",width:"3000px",height:"1397px",src:t.url.slice(0,t.url.lastIndexOf("/")),type:"text/html",allowscriptaccess:"always",allowfullscreen:"true",scrolling:"yes",allownetworking:"all"}}):e._e(),e._v(" "),5==t.type?a("div",{staticClass:"video-wrapper"},[a("iframe",{attrs:{width:"560",height:"315",src:"https://youtube.com/embed/"+e.getYoutube(t.url),frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]):e._e()])]):e._e()]),e._v(" "),e.admin?a("div",{staticClass:"column is-narrow"},[a("button",{staticClass:"button is-danger",on:{click:function(a){return e.confirmDelete(t.id,s)}}},[a("i",{staticClass:"fas fa-trash"})])]):e._e()])})),0),e._v(" "),e.allowComment||!e.full&&!e.edit?e._e():a("button",{staticClass:"button",on:{click:function(t){e.allowComment=!0}}},[a("i",{staticClass:"fad fa-comments mr-2"}),e._v("\n          "+e._s(e.trans.get("challenges.comment"))+"\n        ")]),e._v(" "),(e.edit||e.full)&&e.allowComment?a("InputEmoji"):e._e(),e._v(" "),a("div",{staticClass:"mt-3 comments"},[e._l(e.orderedComments,(function(t,s){return a("div",{key:s,staticClass:"comment m-0"},[a("div",{staticClass:"flexCenter imgTeacher"},["student"==t.info.type?a("img",{attrs:{width:"32px",height:"32px",src:t.info.avatar}}):e._e(),e._v(" "),"teacher"==t.info.type?a("i",{staticClass:"fas fa-user-graduate text-light textshadow"}):e._e()]),e._v(" "),a("div",{staticClass:"commentInfo p-2"},[a("div",[a("span",{staticClass:"tag is-info p-2"},[e._v(e._s(t.info.name))]),e._v(" "),a("span",{staticClass:"tag is-link p-2"},[e._v(e._s(t.info.datetime))]),e._v(" "),e.admin?a("button",{staticClass:"button tag is-danger has-text-light p-2",on:{click:function(a){return e.deleteComment(t.id,s)}}},[a("i",{staticClass:"far fa-trash-alt"})]):e._e()]),e._v(" "),a("div",{staticClass:"flexVertical p-2"},[e._v(e._s(t.text))])])])})),e._v(" "),a("div",{staticClass:"mt-3"},[e.challenge.comments&&e.challenge.comments.length>3&&e.maxComments!=e.challenge.comments.length?a("a",{staticClass:"has-text-dark",on:{click:function(t){e.maxComments=e.challenge.comments.length}}},[e._v(e._s(e.trans.get("challenges.load_comments")))]):e._e()])],2),e._v(" "),e.prevRating||!e.full||e.rating||e.admin||!e.challengeReactive.is_conquer?e._e():a("div",[a("div",{staticClass:"mt-4 mb-0"},[a("i",{staticClass:"fad fa-bullhorn mr-1 ml-4 mt-2"}),e._v("\n            "+e._s(e.trans.get("challenges.rating_feedback"))+"\n          ")]),e._v(" "),a("VueFeedbackReaction",{staticClass:"mt-2",attrs:{containerWidth:"50px",containerHeight:"50px",emojiWidth:"50px",emojiHeight:"50px",labels:["","","","",""]},on:{input:e.sendRating},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1),e._v(" "),e.admin&&e.challengeReactive.rating?a("div",{staticClass:"mt-2 is-flex is-center-vertically"},[a("vue-reaction-emoji",{attrs:{reaction:e.returnEmoji(e.challengeReactive.rating),"is-active":!0,"is-disabled":!1}}),e._v("\n          Feedback: "+e._s(e.challengeReactive.rating)+" / 5\n        ")],1):e._e(),e._v(" "),e.edit&&e.admin||!e.admin?a("div",{staticClass:"buttons"},[e.admin||2!=e.challengeReactive.completion&&1!=e.challengeReactive.completion||e.checkCompletion?e._e():a("button",{staticClass:"button is-info",on:{click:function(t){return e.markCompleted(e.challenge)}}},[e._m(0),e._v(" "),a("span",[e._v(e._s(e.trans.get("challenges.mark_title")))])]),e._v(" "),e.admin?a("button",{staticClass:"button is-outlined is-link",on:{click:function(t){e.isAttachmentModalActive=!0}}},[e._m(1),e._v(" "),a("span",[e._v(e._s(e.trans.get("challenges.add_attachment")))])]):e._e(),e._v(" "),e.admin?a("button",{staticClass:"button is-outlined is-primary",on:{click:function(t){e.isQuestionModalActive=!0}}},[e._m(2),e._v(" "),a("span",[e._v(e._s(e.trans.get("challenges.add_question")))])]):e._e(),e._v(" "),e.challengeReactive.is_conquer&&e.admin?a("button",{staticClass:"button is-success is-outlined",on:{click:function(t){return e.$parent.showModal(e.challenge)}}},[e._m(3),e._v(" "),a("span",[e._v(e._s(e.trans.get("challenges.mark")))])]):e._e(),e._v(" "),e.admin?a("button",{staticClass:"button is-dark is-outlined",on:{click:e.editChallenge}},[e._m(4),e._v(" "),a("span",[e._v(e._s(e.trans.get("general.edit")))])]):e._e(),e._v(" "),e.admin?a("button",{staticClass:"button is-danger is-outlined",on:{click:function(t){return e.$parent.confirmDelete(e.challengeReactive.id)}}},[e._m(5),e._v(" "),a("span",[e._v(e._s(e.trans.get("general.delete")))])]):e._e()]):e._e()],2)])]),e._v(" "),e.admin?a("b-modal",{attrs:{active:e.isAttachmentModalActive,"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-modal":""},on:{"update:active":function(t){e.isAttachmentModalActive=t}}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.addAttachment(t)}}},[a("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v("\n            "+e._s(e.trans.get("challenges.add_attachment"))+"\n          ")])]),e._v(" "),a("section",{staticClass:"modal-card-body"},[a("b-field",[a("b-select",{staticStyle:{"font-family":"Arial, FontAwesome"},attrs:{placeholder:e.trans.get("challenges.attachment_type"),icon:"paperclip","icon-pack":"fas",required:""},model:{value:e.attachment.type,callback:function(t){e.$set(e.attachment,"type",t)},expression:"attachment.type"}},[a("option",{attrs:{value:"1",icon:"paperclip","icon-pack":"fas"}},[e._v("\n                Web page\n              ")]),e._v(" "),a("option",{attrs:{value:"2"}},[e._v("Genial.ly")]),e._v(" "),a("option",{attrs:{value:"3"}},[e._v("Moodle")]),e._v(" "),a("option",{attrs:{value:"4"}},[e._v("Google drive")]),e._v(" "),a("option",{attrs:{value:"5"}},[e._v("Youtube")]),e._v(" "),a("option",{attrs:{value:"6"}},[e._v("Dropbox")]),e._v(" "),a("option",{attrs:{value:"7"}},[e._v("File")]),e._v(" "),a("option",{attrs:{value:"8"}},[e._v("H5p.org")])])],1),e._v(" "),1==e.attachment.type||2==e.attachment.type||5==e.attachment.type||8==e.attachment.type?a("div",[a("b-radio-button",{attrs:{"native-value":"0",type:"is-link"},model:{value:e.attachment.mode,callback:function(t){e.$set(e.attachment,"mode",t)},expression:"attachment.mode"}},[a("b-icon",{attrs:{icon:"link"}}),e._v(" "),a("span",[e._v("Link")])],1),e._v(" "),a("b-radio-button",{attrs:{"native-value":"1",type:"is-link"},model:{value:e.attachment.mode,callback:function(t){e.$set(e.attachment,"mode",t)},expression:"attachment.mode"}},[a("b-icon",{attrs:{icon:"expand"}}),e._v(" "),a("span",[e._v("Embedded")])],1)],1):e._e(),e._v(" "),a("b-field",{staticClass:"mt-3"},[a("b-input",{attrs:{placeholder:e.trans.get("general.name")+" ("+e.trans.get("general.optional")+")"},model:{value:e.attachment.name,callback:function(t){e.$set(e.attachment,"name",t)},expression:"attachment.name"}})],1),e._v(" "),a("b-field",[a("b-input",{attrs:{placeholder:"URL",required:"",type:"url"},model:{value:e.attachment.url,callback:function(t){e.$set(e.attachment,"url",t)},expression:"attachment.url"}})],1)],1),e._v(" "),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){e.isAttachmentModalActive=!1}}},[e._v("\n            "+e._s(e.trans.get("general.close"))+"\n          ")]),e._v(" "),a("button",{staticClass:"button is-primary"},[e._v("\n            "+e._s(e.trans.get("general.add"))+"\n          ")])])])])]):e._e(),e._v(" "),e.admin?a("b-modal",{attrs:{active:e.isQuestionModalActive,"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-modal":""},on:{"update:active":function(t){e.isQuestionModalActive=t}}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.addQuestion(t)}}},[a("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v("\n            "+e._s(e.trans.get("challenges.add_question"))+"\n          ")])]),e._v(" "),a("section",{staticClass:"modal-card-body"},[a("b-field",[a("b-input",{attrs:{placeholder:e.trans.get("challenges.question"),type:"text",required:""},model:{value:e.question.question,callback:function(t){e.$set(e.question,"question",t)},expression:"question.question"}})],1),e._v(" "),a("div",{staticClass:"field is-horizontal mb-3"},[a("div",{staticClass:"field-body"},[a("div",{staticClass:"field is-expanded"},[a("div",{staticClass:"field has-addons"},[a("p",{staticClass:"control"},[a("a",{staticClass:"button is-success"},[a("i",{staticClass:"fas fa-check colored"})])]),e._v(" "),a("p",{staticClass:"control is-expanded"},[a("b-field",[a("b-input",{attrs:{placeholder:e.trans.get("challenges.correct_answer"),type:"text",required:""},model:{value:e.question.correctAnswer,callback:function(t){e.$set(e.question,"correctAnswer",t)},expression:"question.correctAnswer"}})],1)],1)])])])]),e._v(" "),a("div",{staticClass:"field is-horizontal mb-3"},[a("div",{staticClass:"field-body"},[a("div",{staticClass:"field is-expanded"},[a("div",{staticClass:"field has-addons"},[a("p",{staticClass:"control"},[a("a",{staticClass:"button is-danger"},[a("i",{staticClass:"fas fa-times colored"})])]),e._v(" "),a("p",{staticClass:"control is-expanded"},[a("b-field",[a("b-input",{attrs:{placeholder:e.trans.get("challenges.incorrect_answer"),required:"",type:"text"},model:{value:e.question.incorrectAnswer1,callback:function(t){e.$set(e.question,"incorrectAnswer1",t)},expression:"question.incorrectAnswer1"}})],1)],1)])])])]),e._v(" "),a("div",{staticClass:"field is-horizontal mb-3"},[a("div",{staticClass:"field-body"},[a("div",{staticClass:"field is-expanded"},[a("div",{staticClass:"field has-addons"},[a("p",{staticClass:"control"},[a("a",{staticClass:"button is-danger"},[a("i",{staticClass:"fas fa-times colored"})])]),e._v(" "),a("p",{staticClass:"control is-expanded"},[a("b-field",[a("b-input",{attrs:{placeholder:e.trans.get("challenges.incorrect_answer"),type:"text"},model:{value:e.question.incorrectAnswer2,callback:function(t){e.$set(e.question,"incorrectAnswer2",t)},expression:"question.incorrectAnswer2"}})],1)],1)])])])]),e._v(" "),a("div",{staticClass:"field is-horizontal mb-3"},[a("div",{staticClass:"field-body"},[a("div",{staticClass:"field is-expanded"},[a("div",{staticClass:"field has-addons"},[a("p",{staticClass:"control"},[a("a",{staticClass:"button is-danger"},[a("i",{staticClass:"fas fa-times colored"})])]),e._v(" "),a("p",{staticClass:"control is-expanded"},[a("b-field",[a("b-input",{attrs:{placeholder:e.trans.get("challenges.incorrect_answer"),type:"text"},model:{value:e.question.incorrectAnswer3,callback:function(t){e.$set(e.question,"incorrectAnswer3",t)},expression:"question.incorrectAnswer3"}})],1)],1)])])])])],1),e._v(" "),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){e.isQuestionModalActive=!1}}},[e._v("\n            "+e._s(e.trans.get("general.close"))+"\n          ")]),e._v(" "),a("button",{staticClass:"button is-primary"},[e._v("\n            "+e._s(e.trans.get("general.add"))+"\n          ")])])])])]):e._e()],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-check"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-paperclip"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-question"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-check"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-edit"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-trash-alt"})])}],!1,null,null,null);t.default=o.exports},Htx7:function(e,t,a){"use strict";a.r(t);var s=a("rAQ3"),n=a("1crk"),i={props:["challengegroup","challenges","code","icon"],created:function(){},data:function(){return{addChallenge:!1,search:"",importFlag:!1,challengeEdit:null,isModalActive:!1,isImportModalActive:!1,students:null,groups:null,currentChallenge:null,mark:null}},methods:{deleteChallengeGroup:function(e){this.$buefy.dialog.confirm({title:this.trans.get("general.delete"),message:this.trans.get("general.confirm_delete"),confirmText:this.trans.get("general.delete"),cancelText:this.trans.get("general.cancel"),type:"is-danger",hasIcon:!0,icon:"times-circle",iconPack:"fa",ariaRole:"alertdialog",ariaModal:!0,onConfirm:function(){axios.delete("/classroom/challenges/group/"+e).then((function(e){location.reload()}))}})},confirmDelete:function(e){var t=this;this.$buefy.dialog.confirm({title:this.trans.get("general.delete"),message:this.trans.get("general.confirm_delete"),confirmText:this.trans.get("general.delete"),cancelText:this.trans.get("general.cancel"),type:"is-danger",hasIcon:!0,icon:"times-circle",iconPack:"fa",ariaRole:"alertdialog",ariaModal:!0,onConfirm:function(){axios.delete("/classroom/challenges/"+e).then((function(e){1===e.data&&t.$parent.getChallenges(t.challengegroup.id)}))}})},showModal:function(e){var t=this;this.currentChallenge=e,axios.post("/classroom/"+this.code+"/challenges/info",{type:e.type,challenge:e.id}).then((function(a){0==e.type?t.students=a.data:t.groups=a.data,t.isModalActive=!0}))},toggleChallenge:function(e){axios.post("/classroom/"+this.code+"/challenges/toggle",{id:e,challenge:this.currentChallenge.id})},buttonAddChallege:function(e){var t=0==e?"<span class='ml-2'>"+this.trans.get("challenges.add")+"</span>":"";return this.addChallenge?this.trans.get("general.cancel"):"<i class='far fa-plus'></i>"+t}},components:{CreateChallenges:s.default,ShowChallenge:n.default},computed:{filteredList:function(){var e=this;return this.orderedChallenges.filter((function(t){return t.title.toLowerCase().includes(e.search.toLowerCase())}))},orderedChallenges:function(){return _.orderBy(this.challenges,"datetime","desc")}},updated:function(){}},l=a("KHd+"),c=Object(l.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"topref",staticClass:"pl-0"},[a("div",{staticClass:"panel is-primary pl-0"},[a("p",{staticClass:"panel-heading is-flex has-space-between align-items-center p-3"},[a("span",[a("i",{class:e.challengegroup.icon}),e._v(" "),a("span",{staticClass:"pl-3"},[e._v(e._s(e.challengegroup.name))]),e._v(" "),0==e.challenges.length?a("button",{staticClass:"button is-danger",staticStyle:{"font-size":"0.5em"},on:{click:function(t){return e.deleteChallengeGroup(e.challengegroup.id)}}},[a("i",{staticClass:"fas fa-trash"})]):e._e()]),e._v(" "),a("span",[a("button",{staticClass:"button",on:{click:function(t){e.isImportModalActive=!0}}},[a("i",{staticClass:"fas fa-file-import"}),e._v(" "),a("span",{staticClass:"is-hidden-mobile ml-2"},[e._v(e._s(e.trans.get("general.import")))])]),e._v(" "),a("button",{staticClass:"button",on:{click:function(t){e.challengeEdit=null,e.addChallenge=!e.addChallenge}}},[a("span",{staticClass:"is-hidden-tablet",domProps:{innerHTML:e._s(e.buttonAddChallege(1))}}),e._v(" "),a("span",{staticClass:"is-hidden-mobile",domProps:{innerHTML:e._s(e.buttonAddChallege(0))}})])])]),e._v(" "),!e.addChallenge&&e.challenges.length>0?a("div",{staticClass:"panel-block"},[a("p",{staticClass:"control has-icons-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"input",attrs:{type:"text",placeholder:"Search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),e._m(0)])]):e._e(),e._v(" "),e.addChallenge?a("div",{staticClass:"panel-block"},[a("CreateChallenges",{attrs:{edit:e.challengeEdit,"import-flag":e.importFlag,iconPrev:e.icon,challengegroups:e.$parent.challengesgroup,code:e.code,challengegroup:e.challengegroup.id,"students-loaded":e.students}})],1):e._e(),e._v(" "),0!=e.challenges.length||e.addChallenge?e._e():a("div",{staticClass:"panel-block"},[a("h3",{staticClass:"is-size-3 p-4 w-100 has-text-centered"},[a("i",{staticClass:"fal fa-smile-wink"}),e._v("\n        "+e._s(e.trans.get("challenges.empty"))+"\n      ")])]),e._v(" "),e.challenges.length>0&&!e.addChallenge?a("div",{staticClass:"panel-block is-block p-3"},e._l(e.filteredList,(function(t){return a("div",{key:t.id},[a("ShowChallenge",{attrs:{code:e.code,challenge:t,admin:!0,edit:!0,students:e.students}})],1)})),0):e._e()]),e._v(" "),a("b-modal",{attrs:{active:e.isModalActive,width:"95%",scroll:"keep"},on:{"update:active":function(t){e.isModalActive=t}}},[e.currentChallenge?a("div",{staticClass:"p-5 rounded has-background-light"},[a("h1",{staticClass:"is-size-1 mb-3"},[e._v("\n        "+e._s(e.currentChallenge.title)+"\n      ")]),e._v(" "),0==e.currentChallenge.type?a("div",e._l(e.students,(function(t){return a("div",{key:t.id,staticClass:"p-3"},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-narrow is-flex has-all-centered"},[a("div",{staticClass:"field"},[t.challenges?a("b-switch",{attrs:{value:t.challenges.length?1:0,"true-value":"1","false-value":"0",type:"is-info"},on:{input:function(a){return e.toggleChallenge(t.id)}}},[e._v(e._s(t.name))]):e._e()],1)])])])})),0):e._e(),e._v(" "),1==e.currentChallenge.type?a("div",e._l(e.groups,(function(t){return a("div",{key:t.id,staticClass:"p-3"},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-narrow is-flex has-all-centered"},[a("div",{staticClass:"field"},[a("b-switch",{attrs:{value:t.challenges.length?1:0,"true-value":"1","false-value":"0",type:"is-info"},on:{input:function(a){return e.toggleChallenge(t.id)}}},[e._v(e._s(t.name))])],1)])])])})),0):e._e()]):e._e()]),e._v(" "),a("b-modal",{attrs:{active:e.isImportModalActive,"has-modal-card":"","full-screen":""},on:{"update:active":function(t){e.isImportModalActive=t}}},[a("import-challenge",{attrs:{classroom:e.code,challengegroup:e.challengegroup.id}})],1)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-left"},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])}],!1,null,null,null);t.default=c.exports}}]);