(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{ENOF:function(t,s,e){"use strict";e.r(s);var a=e("XuX8"),i=e.n(a),n=e("o0O0"),o=e("EyHm"),r=e.n(o);i.a.use(r.a),i.a.component("apexchart",r.a);var c={props:["student","classroom","chart","admin","items","shop","challenges","cards","evaluation","settings","allcards","pets"],mounted:function(){this.behaviours=this.student.behaviours,this.admin||(this.activeTab=1,this.updateEmpty(),this.itemsJson=JSON.parse(this.shop.items),this.eq1Json=JSON.parse(this.shop.eq1),this.eq2Json=JSON.parse(this.shop.eq2),this.eq3Json=JSON.parse(this.shop.eq3))},data:function(){return{activeTab:0,dateStart:null,dateEnd:null,series:[],labels:[],colors:[],update:0,inventoryRemaining:0,itemsJson:null,eq1Json:null,eq2Json:null,eq3Json:null,forceReload:0,prevImage:null,image:null,behaviours:null,isAssignModalActive:!1,showRubric:!1,rubric:null}},methods:{lastBehaviour:function(){var t,s=this.student.behaviours[this.student.behaviours.length-1];return t=null==s.custom_text?s.name:s.custom_text,s?"<span class='tag is-dark'>"+new Date(s.created_at).toLocaleDateString()+"</span><i class='"+s.icon+" mx-2'></i>"+this.trans.get(t):""},getPassFail:function(t){return n.default.getPassFail(t,this.settings.eval_max)},getEmoji:function(t){return n.default.getEmoji(t,this.settings.eval_max)},loadRubric:function(t){var s=this;axios.post("/classroom/evaluation/rubric",{rubric:t}).then((function(e){s.rubric=e.data,s.showRubric=!0,axios.post("/classroom/evaluation/student/rubric",{student:s.student.id,rubric:t}).then((function(t){t.data.forEach((function(t){document.querySelector("[row=row"+t[0]+"][item=item"+t[1]+"]").classList.add("selectedSubItem")}))}))}))},calculate:function(t){var s=1;switch(t.offset){case 1:s=this.shop.multiplier1;break;case 2:s=this.shop.multiplier2;break;case 3:s=this.shop.multiplier3}return Math.round(t.price*s)},hide:function(){var t=this;axios.post("/classroom/students/toggle",{id:this.student.id,prop:"hidden"}).then((function(s){t.student.hidden=(t.student.hidden+1)%2,t.$forceUpdate()}))},deleteStudent:function(){var t=this;this.$buefy.dialog.confirm({title:this.trans.get("general.delete"),message:this.trans.get("general.confirm_delete"),confirmText:this.trans.get("general.delete"),cancelText:this.trans.get("general.cancel"),type:"is-danger",hasIcon:!0,icon:"times-circle",iconPack:"fa",ariaRole:"alertdialog",ariaModal:!0,onConfirm:function(){axios.delete("/classroom/"+t.classroom.code+"/student/"+t.student.id,{_method:"delete"}).then((function(s){location.href="/classroom/"+t.classroom.code}))}})},updateName:function(){var t=this;this.student.name.length>=4?axios.post("/classroom/"+this.classroom.code+"/student/name",{id:this.student.id,name:this.student.name}).then((function(s){t.$toast(t.trans.get("success_error.update_success"),{type:"success"}),t.$forceUpdate()})):this.$toast(this.trans.get("success_error.min_name"),{type:"error"})},confirmDelete:function(t,s,e){var a=this;this.$buefy.dialog.confirm({title:this.trans.get("general.delete"),message:this.trans.get("general.confirm_delete"),confirmText:this.trans.get("general.delete"),cancelText:this.trans.get("general.cancel"),type:"is-danger",hasIcon:!0,icon:"times-circle",iconPack:"fa",ariaRole:"alertdialog",ariaModal:!0,onConfirm:function(){axios.post("/classroom/student/"+t,{row:s,date:e,student:a.student.id,_method:"delete"}).then((function(s){"behaviour"==t?(a.behaviours=s.data,a.student.updated_at=new Date,a.forceRerender()):location.reload()}))}})},toggle:function(t){var s=this;axios.post("/classroom/student/badge",{badge:t,student:this.student.id}).then((function(t){s.student.badges=t.data.badges,s.student.hp=t.data.hp,s.student.xp=t.data.xp,s.student.gold=t.data.gold,s.$forceUpdate()}))},findInStudent:function(t){return!(this.student.badges.findIndex((function(s,e){return s.id===t}))>=0)},updateEmpty:function(){var t=6;this.student.items.length>=6&&(t=12),this.inventoryRemaining=t-this.student.items.length},confirmChangeClass:function(t){var s=this;this.$buefy.dialog.confirm({title:this.trans.get("students.change_class"),message:this.trans.get("students.basic_equipment"),confirmText:this.trans.get("students.change_class"),cancelText:this.trans.get("general.cancel"),type:"is-warning",iconPack:"fa",hasIcon:!0,onConfirm:function(){axios.post("/classroom/"+s.classroom.code+"/student/changecharacter",{id:s.student.id,character_id:t,mode:"student"}).then((function(t){location.reload()}))}})},useItem:function(t,s){var e=this;this.$buefy.dialog.confirm({message:s+" <br><br>Would you like to use the item?",onConfirm:function(){axios.post("/classroom/"+e.classroom.code+"/student/useitem",{id:e.student.id,itemId:t.id}).then((function(s){s.data&&(t.pivot.count--,0==t.pivot.count&&e.inventoryRemaining++,e.student.hp=Math.min(e.student.hp+s.data.hp,100),e.student.xp+=s.data.xp,e.forceRerender())}))}})},reload:function(){location.reload()},forceRerender:function(){this.update+=1},updateInventory:function(t,s){axios.patch("/classroom/student/inventory",{id:this.student.id,item_id:t,count:s,_method:"patch"})},message:function(t){var s="";return t.hp>0&&(s+=this.trans.get("shop.recovers_hp")+t.hp+" <i class='fas fa-heart colored'></i>. "),t.xp>0&&(s+=this.trans.get("shop.gives_xp")+t.xp+" <i class='fas fa-fist-raised colored'></i>. "),""!=s||t.description?(s+=t.description?t.description:"",s):this.trans.get("shop.what_is")},propertiesMessage:function(t){return t.hp+"% <i class='fas fa-heart colored'></i> "+t.xp+"% <i class='fas fa-fist-raised colored'></i> "+t.gold+"% <i class='fas fa-coins colored'></i>"},sortByDate:function(t,s){return new Date(s.pivot.created_at).getTime()-new Date(t.pivot.created_at).getTime()},sortByLogDate:function(t,s){return new Date(s.created_at).getTime()-new Date(t.created_at).getTime()},getName:function(t){return t?t+" üçÖüçñ":"üçÖüçñ"},buyPet:function(t){var s=this;this.$buefy.dialog.confirm({title:this.trans.get("shop.buy_item"),message:this.trans.get("shop.buy_text")+"?",confirmText:this.trans.get("shop.buy"),cancelText:this.trans.get("general.cancel"),type:"is-link",iconPack:"fa",hasIcon:!1,onConfirm:function(){axios.post("/classroom/"+s.classroom.code+"/student/buypet",{pet:t.id}).then((function(e){s.$toast(e.data.message,{type:e.data.type}),"success"==e.data.type&&(s.student.pets=e.data.pets,s.student.gold=s.student.gold-t.price,s.student.boost=e.data.boost,s.$forceUpdate(),s.$refs.showStd.$forceUpdate())}))}})},buyItem:function(t){var s=this;this.$buefy.dialog.confirm({title:this.trans.get("shop.buy_item"),message:this.trans.get("shop.buy_text")+"?",confirmText:this.trans.get("shop.buy"),cancelText:this.trans.get("general.cancel"),type:"is-link",iconPack:"fa",hasIcon:!1,onConfirm:function(){axios.post("/classroom/"+s.classroom.code+"/student/buyitem",{item:t.id}).then((function(e){s.$toast(e.data.message,{type:e.data.type}),"success"==e.data.type&&(s.student.items=e.data.items,s.updateEmpty(),s.student.gold=s.student.gold-t.price,s.$forceUpdate())}))}})},buyEquipment:function(t,s){var e=this;this.$buefy.dialog.confirm({title:this.trans.get("shop.buy_item"),message:this.trans.get("shop.buy_text")+s.price+"<i class='fas fa-coins colored'></i>? ("+s.hp+"% <i class='fas fa-heart colored'></i> | "+s.xp+"% <i class='fas fa-fist-raised colored'></i> | "+s.gold+"% <i class='fas fa-coins colored'></i>)",confirmText:this.trans.get("shop.buy"),cancelText:this.trans.get("general.cancel"),type:"is-link",iconPack:"fa",hasIcon:!1,onConfirm:function(){axios.post("/classroom/"+e.classroom.code+"/student/buyequipment",{new:s}).then((function(a){if(e.$toast(a.data.message,{type:a.data.type}),"success"==a.data.type){e.student.equipment=a.data.equipment,e.student.gold=e.student.gold-e.calculate(s),t.src=s.src;var i="item"+t.id;e.student.boost=a.data.boost;var n="inv-item-armor-bronce";switch(s.offset){case 2:n="inv-item-armor-silver";break;case 3:n="inv-item-armor-gold"}e.$refs[i][0].classList.add(n),e.$forceUpdate(),e.$refs.showStd.$forceUpdate()}}))}})},filterEquipment:function(t,s){if(t)return t.filter((function(t){return t.type==s}))},updateAvatar:function(){var t=this;this.image.generateBlob((function(s){if(null!=s){var e=new FormData;e.append("avatar",s,"avatar.png"),t.admin&&e.append("student_id",t.student.id),axios.post("/classroom/"+t.classroom.code+"/setting/updateavatar",e,{headers:{"content-type":"multipart/form-data"}}).then((function(t){location.reload()}))}}),"image/png",.8)}},computed:{filteredEntries:function(){var t=this;if(this.behaviours)return this.behaviours.filter((function(s){return(s.pivot.created_at>=t.dateStart||!t.dateStart)&&(s.pivot.created_at<=t.dateEnd||!t.dateEnd)}))},filteredLogEntries:function(){var t=this;return this.student.log_entries.filter((function(s){return(s.created_at>=t.dateStart||!t.dateStart)&&(s.created_at<=t.dateEnd||!t.dateEnd)}))},groupedData:function(){return _.groupBy(this.filteredEntries,"id")},orderedEquipment:function(){return _.orderBy(this.student.equipment,"type")},orderedChallenges:function(){return _.orderBy(this.challenges,"datetime","desc")}},watch:{groupedData:{immediate:!0,handler:function(){var t=this,s=["#c8e6c9","#a5d6a7","#81c784","#66bb6a","#4caf50","#43a047","#388e3c","#2e7d32","#1b5e20","#003300","#002200","#001100","#000000","#000000","#000000","#000000","#000000","#000000","#000000"],e=["#ffccbc","#ffab91","#ff8a65","#ff7043","#ff5722","#f4511e","#e64a19","#d84315","#bf360c","#570000","#370000","#170000","#000000","#000000","#000000","#000000","#000000","#000000","#000000"];this.series=this.labels=[];var a=this.groupedData,i=[];for(var n in a)i.push(a[n]);this.labels=[],this.series=[],this.colors=[],i.forEach((function(a){var i=a[0];t.series.push(a.length),t.labels.push("<i class='"+i.icon+"'></i> "+t.trans.get(i.name)),i.xp+i.hp+i.gold>=0?(t.colors.push(s[0]),s.shift()):(t.colors.push(e[0]),e.shift())}))}}}},l=e("KHd+"),d=Object(l.a)(c,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"columns p-2 h-100 mr-0",class:{"has-bg-student":!t.admin}},[e("div",{ref:"studentInfo",staticClass:"column is-narrow pr-0 noprint"},[e("div",{staticClass:"card rounded card-shadow-s",staticStyle:{"min-width":"275px",overflow:"visible"}},[e("show-character",{ref:"showStd",attrs:{student:t.student,classroom:t.classroom}}),t._v(" "),e("div",{staticClass:"card-content"},[e("div",{staticClass:"media mb-0 has-all-centered"},[t.classroom.character_theme?e("div",{staticClass:"media-left"},[e("figure",{staticClass:"image is-48x48"},[e("img",{staticClass:"rounded",attrs:{src:t.student.avatar,alt:""}})])]):t._e(),t._v(" "),e("div",{staticClass:"media-content"},[e("p",{staticClass:"title is-4"},[t._v(t._s(t.student.name))]),t._v(" "),e("p",{staticClass:"subtitle is-6"},[e("small",[t._v("@"+t._s(t.student.username))])])])]),t._v(" "),e("div",{staticClass:"score p-3 centered-attribute m-1 my-4 has-all-centered",staticStyle:{border:"none"}},[e("span",{staticClass:"attribute has-background-white-ter py-3 rounded",staticStyle:{width:"100%"}},[e("span",[e("i",{staticClass:"fas fa-heart colored has-text-grey-light",class:{invisible:t.student.hp>=30}})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.student.hp<30,expression:"student.hp < 30"}],staticClass:"has-text-grey-light"},[t._v(t._s(t.student.hp))])]),t._v(" "),t.student.hp>0?e("span",{staticClass:"attribute has-background-danger py-3 rounded-left",class:{rounded:100==t.student.hp},style:"width: "+t.student.hp+"%"},[e("i",{staticClass:"fas fa-heart colored",class:{invisible:t.student.hp<30}}),t._v(" "),t.student.hp>=30?e("span",[t._v(t._s(t.student.hp))]):t._e()]):t._e()]),t._v(" "),e("div",{staticClass:"score p-3 m-1 mt-3"},[t._m(0),t._v("\n          "+t._s(t.student.xp)+"\n        ")]),t._v(" "),e("div",{staticClass:"gold p-3 m-1 mt-2"},[t._m(1),t._v("\n          "+t._s(t.student.gold)+"\n        ")])])],1)]),t._v(" "),e("div",{staticClass:"column pr-0"},[e("b-tabs",{key:t.update,model:{value:t.activeTab,callback:function(s){t.activeTab=s},expression:"activeTab"}},[e("b-tab-item",{attrs:{label:t.trans.get("students.information"),icon:"info-circle","icon-pack":"fad"}},[e("div",{staticClass:"p-2"},[e("h3",{staticClass:"title is-4 ml-2 mb-0"},[t._v("Avatar")]),t._v(" "),t.admin||0!=t.settings.allow_upload?e("div",{staticClass:"m-3"},[e("croppa",{staticClass:"rounded",attrs:{width:128,height:128,accept:"image/*",placeholder:"üì∑ Avatar","placeholder-font-size":16,"canvas-color":"transparent","show-remove-button":!0,"remove-button-color":"black","show-loading":!0,"loading-size":50},model:{value:t.image,callback:function(s){t.image=s},expression:"image"}})],1):t._e(),t._v(" "),e("div",{staticClass:"m-3"},[t.image&&t.image.chosenFile?e("button",{staticClass:"button is-link",on:{click:function(s){return t.updateAvatar()}}},[t._v("\n              Update avatar\n            ")]):t._e()]),t._v(" "),e("image-bank",{staticClass:"m-3",attrs:{admin:t.admin,student:t.student,code:t.classroom.code}})],1),t._v(" "),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v(t._s(t.trans.get("students.name")))])]),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field has-addons"},[e("div",{staticClass:"control"},[e("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.student.name,expression:"student.name"}],staticClass:"input",class:{"is-static":!t.admin},attrs:{type:"text"},domProps:{value:t.student.name},on:{input:function(s){s.target.composing||t.$set(t.student,"name",s.target.value)}}},"input",{disabled:!t.admin},!1))]),t._v(" "),t.admin&&t.student.name.length>=3?e("div",{staticClass:"control"},[e("a",{staticClass:"button is-info",on:{click:t.updateName}},[e("i",{staticClass:"fas fa-save"})])]):t._e()])])]),t._v(" "),t.student.classroom.user.email?e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v("Email")])]),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("p",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.student.classroom.user.email,expression:"student.classroom.user.email"}],staticClass:"input is-static",attrs:{disabled:"",type:"text"},domProps:{value:t.student.classroom.user.email},on:{input:function(s){s.target.composing||t.$set(t.student.classroom.user,"email",s.target.value)}}})])])])]):t._e(),t._v(" "),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v("Username")])]),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("p",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.student.username,expression:"student.username"}],staticClass:"input is-static",attrs:{disabled:"",type:"text"},domProps:{value:t.student.username},on:{input:function(s){s.target.composing||t.$set(t.student,"username",s.target.value)}}})])])])]),t._v(" "),t.student.password_plain&&t.admin?e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v(t._s(t.trans.get("students.password")))])]),t._v(" "),e("div",{staticClass:"field-body"},[e("b-field",{staticClass:"is-static"},[e("b-input",{staticStyle:{width:"200px"},attrs:{type:"password","icon-pack":"fas",disabled:"","password-reveal":""},model:{value:t.student.password_plain,callback:function(s){t.$set(t.student,"password_plain",s)},expression:"student.password_plain"}})],1)],1)]):t._e(),t._v(" "),t.classroom.character_theme&&t.student.hp>0&&(t.admin||1==t.settings.allow_change_class)?e("div",{staticClass:"p-4"},t._l(t.classroom.character_theme.characters,(function(s){return e("img",{directives:[{name:"tippy",rawName:"v-tippy"}],key:s.id,staticClass:"p-2 m-2 rounded",class:{selected:s.id==t.student.character_id},attrs:{content:t.trans.get("students.highlights")+" <i class='"+s.property+" colored'></i>",src:"/img/character/characters/"+s.id+".png"},on:{click:function(e){return t.confirmChangeClass(s.id)}}})})),0):t._e(),t._v(" "),t.admin?e("div",[1==t.student.hidden?e("button",{staticClass:"button is-success",on:{click:t.hide}},[e("i",{staticClass:"fas fa-eye"}),t._v("\n            "+t._s(t.trans.get("students.show"))+"\n          ")]):e("button",{staticClass:"button is-warning",on:{click:t.hide}},[e("i",{staticClass:"fas fa-eye-slash"}),t._v("\n            "+t._s(t.trans.get("students.hide"))+"\n          ")]),t._v(" "),e("button",{staticClass:"button is-danger",on:{click:t.deleteStudent}},[e("i",{staticClass:"fas fa-trash mr-2"}),t._v("\n            "+t._s(t.trans.get("students.delete"))+"\n          ")])]):t._e()]),t._v(" "),e("b-tab-item",{staticClass:"p-2",attrs:{label:t.trans.get("students.inventory"),icon:"backpack","icon-pack":"fad"}},[!t.admin&&t.student.behaviours.length?e("article",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"message is-dark mb-3",attrs:{content:t.trans.get("students.last")}},[e("div",{staticClass:"message-body"},[e("span",{domProps:{innerHTML:t._s(t.lastBehaviour())}})])]):t._e(),t._v(" "),!t.admin&&t.student.numcards[0]>t.student.numcards[1]?e("div",{staticClass:"mb-3 mt-0"},[e("article",{staticClass:"message is-danger"},[e("div",{staticClass:"message-body"},[e("i",{staticClass:"fas fa-exclamation-square"}),t._v("\n              "+t._s(t.trans.get("success_error.cards_exceded"))+"\n              "+t._s(t.student.numcards[0])+" /\n              "+t._s(t.student.numcards[1])+"\n            ")])])]):t._e(),t._v(" "),t.admin?e("div",{staticClass:"columns is-multiline is-variable"},t._l(t.items,(function(s){return e("div",{key:s.id,staticClass:"column py-2 is-6-tablet is-12-mobile is-4-desktop is-3-fullhd"},[e("b-field",[e("p",{staticClass:"control"},[e("img",{attrs:{src:s.icon}})]),t._v(" "),e("b-numberinput",{attrs:{min:"0","icon-pack":"fa",expanded:"",controlsPosition:"compact"},on:{input:function(e){return t.updateInventory(s.id,s.count)}},model:{value:s.count,callback:function(e){t.$set(s,"count",e)},expression:"item.count"}})],1)],1)})),0):t._e(),t._v(" "),t.admin?t._e():e("div",{staticClass:"inventory",attrs:{id:"inventory"}},[e("div",t._l(t.student.items,(function(s){return e("div",{directives:[{name:"tippy",rawName:"v-tippy"},{name:"show",rawName:"v-show",value:s.pivot.count>0,expression:"item.pivot.count > 0"}],key:s.id,staticClass:"inventory-item",attrs:{content:t.message(s)}},[e("img",{staticClass:"item",attrs:{src:s.icon},on:{click:function(e){s.hp>0&&t.useItem(s,t.message(s))}}}),t._v(" "),e("div",{staticClass:"number-items"},[t._v(t._s(s.pivot.count))])])})),0),t._v(" "),e("div",t._l(t.inventoryRemaining,(function(t){return e("div",{key:t,staticClass:"inventory-item"})})),0),t._v(" "),t.classroom.character_theme?e("div",{key:t.forceReload},t._l(t.orderedEquipment,(function(s){return e("div",{directives:[{name:"tippy",rawName:"v-tippy"}],key:s.id,ref:"item"+s.id,refInFor:!0,staticClass:"inventory-item inv-item-armor relative",class:{"inv-item-armor-bronce":1==s.offset,"inv-item-armor-silver":2==s.offset,"inv-item-armor-gold":3==s.offset},attrs:{content:t.propertiesMessage(s)}},[e("img",{staticClass:"item",attrs:{src:"/img/character/"+s.src,alt:s.id}}),t._v(" "),t.eq1Json||t.eq2Json||t.eq3Json?e("div",{staticClass:"price-buy rounded not-hover"},[e("i",{staticClass:"fas fa-plus"})]):t._e(),t._v(" "),e("div",{staticClass:"w-100 shop-sub-item",staticStyle:{position:"absolute",top:"100px",left:"0"}},t._l([t.eq1Json,t.eq2Json,t.eq3Json],(function(a,i){return e("div",{key:i},t._l(t.filterEquipment(a,s.type),(function(a){return e("div",{key:a.id,staticClass:"inventory-item inv-item-armor w-100",class:{"inv-item-armor-bronce":0==i,"inv-item-armor-silver":1==i,"inv-item-armor-gold":2==i}},[e("img",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"item",attrs:{content:t.propertiesMessage(a),src:"/img/character/"+a.src,alt:a.id}}),t._v(" "),e("div",{staticClass:"price-buy rounded",on:{click:function(e){return t.buyEquipment(s,a)}}},[t._v("\n                      "+t._s(t.calculate(a))+"\n                      "),e("i",{staticClass:"fas fa-coins colored"})])])})),0)})),0)])})),0):t._e(),t._v(" "),e("div",{staticStyle:{clear:"both"}})]),t._v(" "),t.itemsJson?e("div",{staticClass:"shop pt-3"},[e("h2",{staticClass:"is-size-2"},[e("i",{staticClass:"fas fa-store"}),t._v(" Shop")]),t._v(" "),t._l(t.itemsJson,(function(s){return e("div",{key:s.id,staticClass:"columns p-4 m-2 rounded"},[e("div",{staticClass:"column is-relative is-flex has-all-centered is-narrow"},[s.min_lvl?e("div",{staticClass:"lvl-item-top-left"},[e("img",{staticClass:"levelCard",attrs:{src:"/img/cardgen/lvl.png"}}),t._v(" "),e("span",{staticClass:"is-flex has-all-centered"},[t._v(t._s(s.min_lvl))])]):t._e(),t._v(" "),e("img",{attrs:{src:s.icon}})]),t._v(" "),e("div",{staticClass:"column is-flex has-all-centered rounded wheat",domProps:{innerHTML:t._s(t.message(s))}}),t._v(" "),e("div",{staticClass:"column is-flex has-all-centered is-narrow item-price"},[e("button",{staticClass:"button is-success",on:{click:function(e){return t.buyItem(s)}}},[t._v("\n                "+t._s(t.trans.get("shop.buy"))+" "+t._s(s.price)+"\n                "),e("i",{staticClass:"fas fa-coins colored",staticStyle:{"z-index":"0"}})])])])}))],2):t._e()]),t._v(" "),!t.admin&&t.pets.length?e("b-tab-item",{staticClass:"p-2",attrs:{label:t.trans.get("menu.pets"),icon:"dog","icon-pack":"fad"}},[e("article",{staticClass:"message is-danger"},[e("div",{staticClass:"message-body"},[e("i",{staticClass:"fas fa-exclamation-triangle"}),t._v("\n            "+t._s(t.trans.get("shop.pet_warning"))+"\n          ")])]),t._v(" "),t._l(t.pets,(function(s){return e("div",{key:s.id,staticClass:"p-2 m-2"},[e("div",{staticClass:"columns mb-0"},[e("div",{staticClass:"column is-narrow"},[e("img",{directives:[{name:"tippy",rawName:"v-tippy",value:{theme:"light bordered",placement:"bottom",arrow:!0},expression:"{\n                  theme: 'light bordered',\n                  placement: 'bottom',\n                  arrow: true,\n                }"}],staticClass:"pet-selector",attrs:{content:t.getName(s.name),src:"/img/pets/"+s.image}})]),t._v(" "),e("div",{staticClass:"column"},[e("span",{staticClass:"p-2"},[t._v(t._s(s.hp_boost)+"% "),e("i",{staticClass:"fas fa-heart colored"})]),t._v(" "),e("span",{staticClass:"ml-3 p-2"},[t._v(t._s(s.xp_boost)+"% "),e("i",{staticClass:"fas fa-fist-raised colored"})]),t._v(" "),e("span",{staticClass:"ml-3 p-2"},[t._v(t._s(s.gold_boost)+"% "),e("i",{staticClass:"fas fa-coins colored"})])]),t._v(" "),e("div",{staticClass:"column is-narrow"},[e("button",{staticClass:"button is-success",on:{click:function(e){return t.buyPet(s)}}},[t._v("\n                "+t._s(t.trans.get("shop.buy"))+" "+t._s(s.price)+"\n                "),e("i",{staticClass:"fas fa-coins colored",staticStyle:{"z-index":"0"}})])])]),t._v(" "),e("hr",{staticClass:"mt-0"})])}))],2):t._e(),t._v(" "),t.admin||t.cards.length?e("b-tab-item",{attrs:{label:t.trans.get("students.cards"),icon:"club","icon-pack":"fad"}},[t.admin?e("button",{staticClass:"button is-link ml-3 mt-1",on:{click:function(s){t.isAssignModalActive=!0}}},[t._v("\n          "+t._s(t.trans.get("cards.assign"))+"\n        ")]):t._e(),t._v(" "),e("div",{staticClass:"columns is-multiline is-variable"},t._l(t.cards,(function(s,a){return e("div",{key:a,staticClass:"column is-6-tablet is-12-mobile is-6-desktop is-4-fullhd"},[e("show-card",{staticClass:"m-4",attrs:{student:t.student,card:s,code:t.classroom.code,use:!0,admin:t.admin,properties:!1}})],1)})),0)]):t._e(),t._v(" "),t.behaviours&&t.behaviours.length?e("b-tab-item",{staticClass:"p-2",attrs:{label:t.trans.get("students.behaviours"),icon:"heart","icon-pack":"fad"}},[e("div",{staticClass:"is-flex justify-content-center"},[t.series.length?e("apexchart",{attrs:{width:"450",type:"donut",options:{labels:t.labels,colors:t.colors},series:t.series}}):t._e()],1),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateStart,expression:"dateStart"}],staticClass:"input is-rounded",attrs:{type:"date"},domProps:{value:t.dateStart},on:{input:function(s){s.target.composing||(t.dateStart=s.target.value)}}})]),t._v(" "),e("div",{staticClass:"column"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateEnd,expression:"dateEnd"}],staticClass:"input is-rounded",attrs:{type:"date"},domProps:{value:t.dateEnd},on:{input:function(s){s.target.composing||(t.dateEnd=s.target.value)}}})])]),t._v(" "),t.behaviours&&t.behaviours.length?e("b-table",{attrs:{data:t.filteredEntries,"default-sort-direction":"asc","default-sort":"created_at","icon-pack":"fas","sort-icon":"arrow-up"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("b-table-column",{attrs:{field:"icon",label:t.trans.get("students.icon"),centered:""}},[e("span",{staticClass:"tag is-light",class:[s.row.xp+s.row.hp+s.row.gold>=0?"is-success":"is-danger"]},[e("i",{class:s.row.icon})])]),t._v(" "),e("b-table-column",{attrs:{field:"name",label:t.trans.get("students.name"),centered:"",sortable:""}},[t._v(t._s(t.trans.get(s.row.name)))]),t._v(" "),e("b-table-column",{attrs:{field:"created_at","custom-sort":t.sortByDate,label:t.trans.get("students.created_at"),sortable:"",centered:""}},[t._v(t._s(new Date(s.row.pivot.created_at).toLocaleDateString()))]),t._v(" "),e("b-table-column",{attrs:{field:"hp",label:t.trans.get("students.hp"),centered:"",sortable:""}},[e("i",{staticClass:"fas fa-heart"}),t._v("\n              "+t._s(s.row.hp)+"\n            ")]),t._v(" "),e("b-table-column",{attrs:{field:"name",label:t.trans.get("students.xp"),sortable:"",centered:""}},[e("i",{staticClass:"fas fa-fist-raised"}),t._v("\n              "+t._s(s.row.xp)+"\n            ")]),t._v(" "),e("b-table-column",{attrs:{field:"name",label:t.trans.get("students.gold"),sortable:"",centered:""}},[e("i",{staticClass:"fas fa-coins"}),t._v("\n              "+t._s(s.row.gold)+"\n            ")]),t._v(" "),t.admin?e("b-table-column",{attrs:{field:"name",label:t.trans.get("students.settings"),centered:""}},[e("b-button",{attrs:{type:"is-danger is-small"},on:{click:function(e){return t.confirmDelete("behaviour",s.row,s.row.pivot.created_at)}}},[e("i",{staticClass:"fas fa-trash-alt"})])],1):t._e()]}}],null,!1,876688098)}):t._e()],1):t._e(),t._v(" "),t.challenges&&t.challenges.length?e("b-tab-item",{staticClass:"p-2",attrs:{label:t.trans.get("students.challenges"),icon:"pen-fancy","icon-pack":"fad"}},t._l(t.orderedChallenges,(function(s){return e("div",{key:s.id},[e("show-challenge",{attrs:{challenge:s,code:t.classroom.code,admin:t.admin,edit:!1}})],1)})),0):t._e(),t._v(" "),t.evaluation?e("b-tab-item",{staticClass:"p-2",attrs:{label:t.trans.get("students.evaluation"),icon:"analytics","icon-pack":"fad"}},[e("report",{attrs:{classroom:t.classroom,admin:t.admin,grades:t.evaluation,settings:t.settings}}),t._v(" "),e("div",{staticClass:"content"},[e("table",{staticClass:"grades has-background-light"},[e("th",[t._v(t._s(t.trans.get("evaluation.description")))]),t._v(" "),e("th",[t._v(t._s(t.trans.get("evaluation.grade_number")))]),t._v(" "),e("th",[t._v(t._s(t.trans.get("evaluation.tags")))]),t._v(" "),e("th",[t._v(t._s(t.trans.get("evaluation.feedback")))]),t._v(" "),t._l(t.student.grades,(function(s,a){return e("tr",{key:a},[e("td",[t._v(t._s(s.description))]),t._v(" "),e("td",[t.admin||1!=t.settings.eval_type&&2!=t.settings.eval_type?e("span",[s.rubric_id?e("span",{staticClass:"cursor-pointer",on:{click:function(e){return t.loadRubric(s.rubric_id)}}},[e("span",{staticClass:"tag is-size-6",class:{"is-success":s.pivot.grade>=t.settings.eval_max/2,"is-danger":s.pivot.grade<t.settings.eval_max/2}},[e("i",{staticClass:"fas fa-external-link-alt mr-2"}),t._v("\n                      "+t._s(s.pivot.grade))])]):e("span",{staticClass:"tag is-size-6",class:{"is-success":s.pivot.grade>=t.settings.eval_max/2,"is-danger":s.pivot.grade<t.settings.eval_max/2}},[t._v(t._s(s.pivot.grade))])]):t._e(),t._v(" "),1==t.settings.eval_type?e("span",[e("i",{class:"fas "+t.getEmoji(s.pivot.grade)+" rateEmoji"})]):t._e(),t._v(" "),2==t.settings.eval_type?e("span",{staticClass:"tag",class:{"is-success":s.pivot.grade>=t.settings.eval_max/2,"is-danger":s.pivot.grade<t.settings.eval_max/2}},[e("i",{class:"fas "+t.getPassFail(s.pivot.grade)})]):t._e()]),t._v(" "),e("td",t._l(s.tags,(function(s,a){return e("span",{directives:[{name:"tippy",rawName:"v-tippy"}],key:a,staticClass:"tag is-dark cursor-default mx-1",attrs:{content:s.description+" ("+t.trans.get("evaluation.weight")+": "+s.pivot.weight+")"}},[t._v(t._s(s.short))])})),0),t._v(" "),e("td",[t._v(t._s(s.pivot.feedback))])])}))],2)])],1):t._e(),t._v(" "),t.classroom.badges&&t.classroom.badges.length||t.student.badges.length?e("b-tab-item",{staticClass:"p-2",attrs:{label:t.trans.get("students.badges"),icon:"award","icon-pack":"fad"}},[t.admin?e("div",{staticClass:"pl-4"},t._l(t.classroom.badges,(function(s){return e("div",{key:s.id},[e("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"personalBadge type0",class:{notColored:t.findInStudent(s.id)},attrs:{content:"<h1>"+s.title+"</h1><h3>"+s.description+"</h3>"},on:{click:function(e){return t.toggle(s.id)}}},[e("i",{class:"fal "+s.icon})])])})),0):t._e(),t._v(" "),t.admin?t._e():e("div",{staticClass:"pl-4"},t._l(t.student.badges,(function(t){return e("div",{key:t.id},[e("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"personalBadge type0",attrs:{content:"<h1>"+t.title+"</h1><h3>"+t.description+"</h3>"}},[e("i",{class:"fal "+t.icon})])])})),0)]):t._e(),t._v(" "),t.student.log_entries.length?e("b-tab-item",{staticClass:"p-2",attrs:{label:t.trans.get("students.log"),icon:"file","icon-pack":"fad"}},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateStart,expression:"dateStart"}],staticClass:"input is-rounded",attrs:{type:"date"},domProps:{value:t.dateStart},on:{input:function(s){s.target.composing||(t.dateStart=s.target.value)}}})]),t._v(" "),e("div",{staticClass:"column"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateEnd,expression:"dateEnd"}],staticClass:"input is-rounded",attrs:{type:"date"},domProps:{value:t.dateEnd},on:{input:function(s){s.target.composing||(t.dateEnd=s.target.value)}}})])]),t._v(" "),t.student.log_entries.length?e("b-table",{attrs:{data:t.filteredLogEntries,"default-sort-direction":"asc","default-sort":"created_at","icon-pack":"fas","sort-icon":"arrow-up"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("b-table-column",{attrs:{field:"type",label:t.trans.get("students.type"),centered:""}},[e("span",{staticClass:"tag is-light",class:[s.row.value>=0?"is-success":"is-danger"]},["xp"==s.row.type?e("span",[e("i",{staticClass:"fas fa-fist-raised colored"})]):t._e(),t._v(" "),"gold"==s.row.type?e("span",[e("i",{staticClass:"fas fa-coins colored"})]):t._e(),t._v(" "),"hp"==s.row.type?e("span",[e("i",{staticClass:"fas fa-heart colored"})]):t._e()])]),t._v(" "),e("b-table-column",{attrs:{field:"value",label:t.trans.get("students.value"),sortable:""}},[t._v(t._s(s.row.value))]),t._v(" "),e("b-table-column",{attrs:{field:"created_at","custom-sort":t.sortByLogDate,label:t.trans.get("students.created_at"),sortable:"",centered:""}},[t._v(t._s(new Date(s.row.created_at).toLocaleDateString()))]),t._v(" "),t.admin?e("b-table-column",{attrs:{field:"name",label:t.trans.get("students.settings"),centered:""}},[e("b-button",{attrs:{type:"is-danger is-small"},on:{click:function(e){return t.confirmDelete("logentry",s.row,s.row.created_at)}}},[e("i",{staticClass:"fas fa-trash-alt"})])],1):t._e()]}}],null,!1,3924513189)}):t._e()],1):t._e()],1)],1),t._v(" "),t.admin?e("b-modal",{attrs:{active:t.isAssignModalActive,"has-modal-card":"","full-screen":"","can-cancel":!1},on:{"update:active":function(s){t.isAssignModalActive=s}}},[e("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(t._s(t.trans.get("cards.assign")))])]),t._v(" "),e("section",{staticClass:"modal-card-body is-relative",staticStyle:{"z-index":"1"}},[e("show-cards",{attrs:{code:t.classroom.code,cards:t.allcards,student:t.student.id}})],1),t._v(" "),e("footer",{staticClass:"modal-card-foot columns is-multiline",staticStyle:{"overflow-x":"auto"}},[e("div",{staticClass:"column is-narrow"},[e("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.reload}},[t._v("\n            "+t._s(t.trans.get("general.close"))+"\n          ")])])])])]):t._e(),t._v(" "),t.rubric?e("b-modal",{attrs:{active:t.showRubric,"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-modal":"","full-screen":""},on:{"update:active":function(s){t.showRubric=s}}},[e("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(t._s(t.student.name))])]),t._v(" "),e("section",{staticClass:"modal-card-body"},t._l(t.rubric.rows,(function(s){return e("div",{key:s.id,staticClass:"div_rounded rubricRow marginRadius"},[e("h2",{staticClass:"description"},[t._v(t._s(s.description))]),t._v(" "),e("div",{staticClass:"rubricSubitems"},t._l(s.items,(function(a){return e("div",{key:a.id,staticClass:"rubricSubitem marginRadius",attrs:{row:"row"+s.id,item:"item"+a.id}},[e("div",{staticClass:"rubricDetails"},[t._v(t._s(a.description))]),t._v(" "),e("div",{staticClass:"rubricScore"},[t._v(t._s(a.points))])])})),0)])})),0),t._v(" "),e("footer",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(s){t.showRubric=!1}}},[t._v("\n          "+t._s(t.trans.get("general.close"))+"\n        ")])])])]):t._e()],1)}),[function(){var t=this.$createElement,s=this._self._c||t;return s("span",[s("i",{staticClass:"fas fa-fist-raised colored"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",[s("i",{staticClass:"fas fa-coins colored"})])}],!1,null,null,null);s.default=d.exports}}]);